{"name":"Accounts View","template":"custom","owner":"sales-rep@bezl.io","shares":[],"vars":[],"dataSubscriptions":[],"markup":"<style>\n  .btn.btn-mobile {\n  \tpadding-left: 6px;\n    padding-right: 6px;\n    width: 90px;\n  }\n  .no-gutters {\n   padding-left: 0px;\n   padding-right: 0px;\n  }\n  input[type=search]::-webkit-search-cancel-button {\n    -webkit-appearance: searchfield-cancel-button;\n  }\n</style>\n\n\n<div class=\"row\">\n  <div class=\"col-sm-9\">\n    <!-- Filter input box -->\n    <input class=\"form-control\" id=\"filterString\" type=\"search\" incremental=\"true\" placeholder=\"Filter...\" [(ngModel)]=\"bezl.vars.filterString\" (search)=\"bezl.functions['onFilterChange']()\">\n  </div>\n  <div class=\"col-sm-3\">\n    <!-- Loading / Refresh -->\n    <label class=\"pull-right\" [hidden]=\"!bezl.vars.loading\">Loading... <i class=\"fa fa-spinner fa-spin\" style=\"font-size:24px\"></i></label>\n    <button (click)=\"bezl.functions['refresh']()\" *ngIf=\"!bezl.vars.loading\" class=\"btn btn-md btn-default pull-right\">Refresh</button>\n  </div>\n</div>\n\n        \n\n<table class=\"table table-hover table-striped\">\n   <thead>\n    <tr>\n     <th>\n       \n       <div class=\"hidden-xs\">\n       <div class=\"row\">\n       <div class=\"col-sm-2 no-gutters\">\n         <button type=\"button\"\n                 (click)=\"bezl.functions['sort']('ID')\"\n                 class=\"btn btn-default btn-block\">\n           <span class=\"pull-left\">ID</span>\n           <i class=\"fa fa-sort-alpha-asc pull-right\" aria-hidden=\"true\" \n              *ngIf=\"bezl.vars.sortCol == 'ID' && bezl.vars.sort == 'asc'\"></i>\n           <i class=\"fa fa-sort-alpha-desc pull-right\" aria-hidden=\"true\" \n              *ngIf=\"bezl.vars.sortCol == 'ID' && bezl.vars.sort == 'desc'\"></i>\n         </button>\n       </div>\n       <div class=\"col-sm-3 no-gutters\">\n         <button type=\"button\" \n                 (click)=\"bezl.functions['sort']('Name')\"\n                 class=\"btn btn-default btn-block\">\n           <span class=\"pull-left\">Name</span>\n           <i class=\"fa fa-sort-alpha-asc pull-right\" aria-hidden=\"true\" \n              *ngIf=\"bezl.vars.sortCol == 'Name' && bezl.vars.sort == 'asc'\"></i>\n           <i class=\"fa fa-sort-alpha-desc pull-right\" aria-hidden=\"true\" \n              *ngIf=\"bezl.vars.sortCol == 'Name' && bezl.vars.sort == 'desc'\"></i>\n         </button>\n       </div>\n       <div class=\"col-sm-2 no-gutters\">\n         <button type=\"button\" \n                 (click)=\"bezl.functions['sort']('Territory')\"\n                 class=\"btn btn-default btn-block\">\n           <span class=\"pull-left\">Territory</span>\n           <i class=\"fa fa-sort-alpha-asc pull-right\" aria-hidden=\"true\" \n              *ngIf=\"bezl.vars.sortCol == 'Territory' && bezl.vars.sort == 'asc'\"></i>\n           <i class=\"fa fa-sort-alpha-desc pull-right\" aria-hidden=\"true\" \n              *ngIf=\"bezl.vars.sortCol == 'Territory' && bezl.vars.sort == 'desc'\"></i>\n         </button>\n       </div>\n       <div class=\"col-sm-2 no-gutters\">\n         <button type=\"button\" \n                 (click)=\"bezl.functions['sort']('LastContact')\"\n                 class=\"btn btn-default btn-block\">\n           <span class=\"pull-left\">Last Contact</span>\n           <i class=\"fa fa-sort-numeric-asc pull-right\" aria-hidden=\"true\" \n              *ngIf=\"bezl.vars.sortCol == 'LastContact' && bezl.vars.sort == 'asc'\"></i>\n           <i class=\"fa fa-sort-numeric-desc pull-right\" aria-hidden=\"true\" \n              *ngIf=\"bezl.vars.sortCol == 'LastContact' && bezl.vars.sort == 'desc'\"></i>\n         </button>\n       </div>\n       <div class=\"col-sm-2 no-gutters\">\n         <button type=\"button\" \n                 (click)=\"bezl.functions['sort']('NextTaskDue')\"\n                 class=\"btn btn-default btn-block\">\n           <span class=\"pull-left\">Task Due</span>\n           <i class=\"fa fa-sort-numeric-asc pull-right\" aria-hidden=\"true\" \n              *ngIf=\"bezl.vars.sortCol == 'NextTaskDue' && bezl.vars.sort == 'asc'\"></i>\n           <i class=\"fa fa-sort-numeric-desc pull-right\" aria-hidden=\"true\" \n              *ngIf=\"bezl.vars.sortCol == 'NextTaskDue' && bezl.vars.sort == 'desc'\"></i>\n         </button>\n       </div>\n       <div class=\"col-sm-1 no-gutters\">\n         <button type=\"button\" \n                 (click)=\"bezl.functions['sort']('Distance')\"\n                 class=\"btn btn-default btn-block\">\n           <span class=\"pull-left\">Distance</span>\n           <i class=\"fa fa-sort-numeric-asc pull-right\" aria-hidden=\"true\" \n              *ngIf=\"bezl.vars.sortCol == 'Distance' && bezl.vars.sort == 'asc'\"></i>\n           <i class=\"fa fa-sort-numeric-desc pull-right\" aria-hidden=\"true\" \n              *ngIf=\"bezl.vars.sortCol == 'Distance' && bezl.vars.sort == 'desc'\"></i>\n         </button>\n       </div>\n       </div>\n       </div>\n      <!--/th>\n      </tr>\n      <tr>\n      <th-->\n       \n       <!-- This is the normal button layout for a big screen.  The small layout will follow -->\n       <!--div class=\"btn-group btn-group-justified hidden-xs\" role=\"group\" aria-label=\"Justified button group\">\n         <div class=\"btn-group\" role=\"group\">\n           <button type=\"button\"\n                   (click)=\"bezl.functions['sort']('ID')\"\n                   class=\"btn btn-default\">\n             <span class=\"pull-left\">ID</span>\n             <i class=\"fa fa-sort-alpha-asc pull-right\" aria-hidden=\"true\" \n                *ngIf=\"bezl.vars.sortCol == 'ID' && bezl.vars.sort == 'asc'\"></i>\n             <i class=\"fa fa-sort-alpha-desc pull-right\" aria-hidden=\"true\" \n                *ngIf=\"bezl.vars.sortCol == 'ID' && bezl.vars.sort == 'desc'\"></i>\n           </button>\n         </div>\n         <div class=\"btn-group\" role=\"group\">\n           <button type=\"button\" \n                   (click)=\"bezl.functions['sort']('Name')\"\n                   class=\"btn btn-default\">\n             <span class=\"pull-left\">Name</span>\n             <i class=\"fa fa-sort-alpha-asc pull-right\" aria-hidden=\"true\" \n                *ngIf=\"bezl.vars.sortCol == 'Name' && bezl.vars.sort == 'asc'\"></i>\n             <i class=\"fa fa-sort-alpha-desc pull-right\" aria-hidden=\"true\" \n                *ngIf=\"bezl.vars.sortCol == 'Name' && bezl.vars.sort == 'desc'\"></i>\n           </button>\n         </div>\n         <div class=\"btn-group\" role=\"group\">\n           <button type=\"button\" \n                   (click)=\"bezl.functions['sort']('Territory')\"\n                   class=\"btn btn-default\">\n             <span class=\"pull-left\">Territory</span>\n             <i class=\"fa fa-sort-alpha-asc pull-right\" aria-hidden=\"true\" \n                *ngIf=\"bezl.vars.sortCol == 'Territory' && bezl.vars.sort == 'asc'\"></i>\n             <i class=\"fa fa-sort-alpha-desc pull-right\" aria-hidden=\"true\" \n                *ngIf=\"bezl.vars.sortCol == 'Territory' && bezl.vars.sort == 'desc'\"></i>\n           </button>\n         </div>\n         <div class=\"btn-group\" role=\"group\">\n           <button type=\"button\" \n                   (click)=\"bezl.functions['sort']('LastContact')\"\n                   class=\"btn btn-default\">\n             <span class=\"pull-left\">Last Contact</span>\n             <i class=\"fa fa-sort-numeric-asc pull-right\" aria-hidden=\"true\" \n                *ngIf=\"bezl.vars.sortCol == 'LastContact' && bezl.vars.sort == 'asc'\"></i>\n             <i class=\"fa fa-sort-numeric-desc pull-right\" aria-hidden=\"true\" \n                *ngIf=\"bezl.vars.sortCol == 'LastContact' && bezl.vars.sort == 'desc'\"></i>\n           </button>\n         </div>\n         <div class=\"btn-group\" role=\"group\">\n           <button type=\"button\" \n                   (click)=\"bezl.functions['sort']('NextTaskDue')\"\n                   class=\"btn btn-default\">\n             <span class=\"pull-left\">Task Due</span>\n             <i class=\"fa fa-sort-numeric-asc pull-right\" aria-hidden=\"true\" \n                *ngIf=\"bezl.vars.sortCol == 'NextTaskDue' && bezl.vars.sort == 'asc'\"></i>\n             <i class=\"fa fa-sort-numeric-desc pull-right\" aria-hidden=\"true\" \n                *ngIf=\"bezl.vars.sortCol == 'NextTaskDue' && bezl.vars.sort == 'desc'\"></i>\n           </button>\n         </div>\n         <div class=\"btn-group\" role=\"group\">\n           <button type=\"button\" \n                   (click)=\"bezl.functions['sort']('Distance')\"\n                   class=\"btn btn-default\">\n             <span class=\"pull-left\">Distance</span>\n             <i class=\"fa fa-sort-numeric-asc pull-right\" aria-hidden=\"true\" \n                *ngIf=\"bezl.vars.sortCol == 'Distance' && bezl.vars.sort == 'asc'\"></i>\n             <i class=\"fa fa-sort-numeric-desc pull-right\" aria-hidden=\"true\" \n                *ngIf=\"bezl.vars.sortCol == 'Distance' && bezl.vars.sort == 'desc'\"></i>\n           </button>\n         </div>\n       </div-->\n       \n       <!-- This is the normal button layout for small screens -->\n       <div class=\"visible-xs\">\n\t\t<div class=\"row\">\n          <div class=\"col-sm-12\">\n         Sort By: <br />\n         \t<div class=\"btn-group\">\n             <button type=\"button\"\n                     (click)=\"bezl.functions['sort']('ID')\"\n                     class=\"btn btn-default btn-mobile\"\n                     >\n               <span class=\"pull-left\">ID</span>\n               <i class=\"fa fa-sort-alpha-asc pull-right\" aria-hidden=\"true\" \n                  *ngIf=\"bezl.vars.sortCol == 'ID' && bezl.vars.sort == 'asc'\"></i>\n               <i class=\"fa fa-sort-alpha-desc pull-right\" aria-hidden=\"true\" \n                  *ngIf=\"bezl.vars.sortCol == 'ID' && bezl.vars.sort == 'desc'\"></i>\n             </button>\n\n             <button type=\"button\" \n                     (click)=\"bezl.functions['sort']('Name')\"\n                     class=\"btn btn-default btn-mobile\"\n                     >\n               <span class=\"pull-left\">Name</span>\n               <i class=\"fa fa-sort-alpha-asc pull-right\" aria-hidden=\"true\" \n                  *ngIf=\"bezl.vars.sortCol == 'Name' && bezl.vars.sort == 'asc'\"></i>\n               <i class=\"fa fa-sort-alpha-desc pull-right\" aria-hidden=\"true\" \n                  *ngIf=\"bezl.vars.sortCol == 'Name' && bezl.vars.sort == 'desc'\"></i>\n             </button>\n\n             <button type=\"button\" \n                     (click)=\"bezl.functions['sort']('Territory')\"\n                     class=\"btn btn-default btn-mobile\"\n                     >\n               <span class=\"pull-left\">Territory</span>\n               <i class=\"fa fa-sort-alpha-asc pull-right\" aria-hidden=\"true\" \n                  *ngIf=\"bezl.vars.sortCol == 'Territory' && bezl.vars.sort == 'asc'\"></i>\n               <i class=\"fa fa-sort-alpha-desc pull-right\" aria-hidden=\"true\" \n                  *ngIf=\"bezl.vars.sortCol == 'Territory' && bezl.vars.sort == 'desc'\"></i>\n             </button>\n            </div>\n          </div>\n         </div>\n         <div class=\"row\">\n           <div class=\"col-sm-12\">\n             <div class=\"btn-group\">\n             <button type=\"button\" \n                     (click)=\"bezl.functions['sort']('LastContact')\"\n                     class=\"btn btn-default btn-mobile\"\n                     >\n               <span class=\"pull-left\">Last Cont</span>\n               <i class=\"fa fa-sort-numeric-asc pull-right\" aria-hidden=\"true\" \n                  *ngIf=\"bezl.vars.sortCol == 'LastContact' && bezl.vars.sort == 'asc'\"></i>\n               <i class=\"fa fa-sort-numeric-desc pull-right\" aria-hidden=\"true\" \n                  *ngIf=\"bezl.vars.sortCol == 'LastContact' && bezl.vars.sort == 'desc'\"></i>\n             </button>\n\n             <button type=\"button\" \n                     (click)=\"bezl.functions['sort']('NextTaskDue')\"\n                     class=\"btn btn-default btn-mobile\"\n                     >\n               <span class=\"pull-left\">Task Due</span>\n               <i class=\"fa fa-sort-numeric-asc pull-right\" aria-hidden=\"true\" \n                  *ngIf=\"bezl.vars.sortCol == 'NextTaskDue' && bezl.vars.sort == 'asc'\"></i>\n               <i class=\"fa fa-sort-numeric-desc pull-right\" aria-hidden=\"true\" \n                  *ngIf=\"bezl.vars.sortCol == 'NextTaskDue' && bezl.vars.sort == 'desc'\"></i>\n             </button>\n\n             <button type=\"button\" \n                     (click)=\"bezl.functions['sort']('Distance')\"\n                     class=\"btn btn-default btn-mobile\"\n                     >\n               <span class=\"pull-left\">Distance</span>\n               <i class=\"fa fa-sort-numeric-asc pull-right\" aria-hidden=\"true\" \n                  *ngIf=\"bezl.vars.sortCol == 'Distance' && bezl.vars.sort == 'asc'\"></i>\n               <i class=\"fa fa-sort-numeric-desc pull-right\" aria-hidden=\"true\" \n                  *ngIf=\"bezl.vars.sortCol == 'Distance' && bezl.vars.sort == 'desc'\"></i>\n             </button>\n            </div>\n          </div>\n         </div>\n       </div>\n       \n     </th>\n    </tr>\n   </thead>\n  <tbody>\n<template ngFor let-acct [ngForOf]=\"bezl.data.Accounts\" let-i=\"index\">\n    <tr class=\"read\"\n       [ngClass]=\"{'default': acct.AccountType=='Customer', 'success':acct.AccountType!='Customer'}\"\n       *ngIf=\"acct.show\">\n    <td>\n      <!-- Main row per account -->\n      <div class=\"row\"\n       (click)=\"bezl.functions['selectRow'](acct)\"\n       *ngIf=\"acct.show\">\n        <div class=\"col-sm-2\">\n          <i class=\"fa fa-chevron-right\" aria-hidden=\"true\" *ngIf=\"!acct.Selected\"></i>\n          <i class=\"fa fa-chevron-down\" aria-hidden=\"true\" *ngIf=\"acct.Selected\"></i>\n          {{acct.ID}}\n        </div>\n        \n        <div class=\"col-sm-3\">{{acct.Name}}</div>\n\t\t<div class=\"col-sm-2\">{{acct.Territory}}</div>\n        <div class=\"col-sm-2\">{{acct.LastContact | date }}</div>\n        <div class=\"col-sm-2\">{{acct.NextTaskDue | date }}</div>\n        <div class=\"col-sm-1\">{{acct.Distance}} mi.</div>\n      </div>\n      <!-- END: Main row per account -->\n      \n      <!-- Drill-down view -->\n      <div class=\"row\" *ngIf=\"acct.Selected && acct.show\" style=\"margin-left:5px;margin-top:10px\">\n        \n        <!-- Address -->      \n        <div class=\"col-sm-3\">\n          <div class=\"panel panel-primary\">\n            <div class=\"panel-heading\">\n              <h4 class=\"panel-title\">Address</h4>\n            </div>\n            <div class=\"panel-body\">\n              <div class=\"row\" *ngIf=\"acct.Address1\">\n                {{acct.Address1}}\n              </div>\n              <div class=\"row\" *ngIf=\"acct.Address2\">\n                {{acct.Address2}}\n              </div>\n              <div class=\"row\" *ngIf=\"acct.Address3\">\n                {{acct.Address3}}\n              </div>\n              <div class=\"row\">\n                {{acct.City}} {{acct.State}} {{acct.ZIP}}\n              </div>\n              <div class=\"row\">\n                <button (click)=\"bezl.functions['clickAddress'](acct)\" \n                        class=\"btn btn-md btn-default\"\n                        style=\"margin-top:10px\">\n                  <i class=\"fa fa-map\" aria-hidden=\"true\"></i> Navigate\n                </button>  \n              </div>\n            </div>\n          </div>\n        </div>\n        <!-- END: Address -->\n        \n        <!-- Contacts -->\n        <div class=\"col-sm-3\">\n          <div class=\"panel panel-primary\">\n            <div class=\"panel-heading\">\n              <h4 class=\"panel-title\">Contacts</h4>\n            </div>\n            <div class=\"panel-body\">\n              <div class=\"row\" style=\"margin-left:10px;\" *ngFor=\"let cont of acct.Contacts\">\n                <div class=\"row\" *ngIf=\"cont.ContactName\">\n                  <strong>{{cont.ContactName}}</strong>\n                </div>\n                <div class=\"row\" *ngIf=\"cont.ContactTitle\">\n                  {{cont.ContactTitle}}\n                </div>\n                <div class=\"row\" *ngIf=\"cont.PhoneNum\">\n                  Phone: <a href=\"tel:{{cont.PhoneNum}}\">{{cont.PhoneNum}}</a>\n                </div>\n                <div class=\"row\" *ngIf=\"cont.EMailAddress\">\n                  E-mail: <a href=\"mailto:{{cont.EMailAddress}}\">{{cont.EMailAddress}}</a>\n                </div>\n                <br>\n              </div>\n            </div>\n          </div>\n        </div>\n        <!-- END: Contacts -->\n        \n        <!-- Other Info -->\n        <div class=\"col-sm-3\">\n          <div class=\"panel panel-primary\">\n            <div class=\"panel-heading\">\n              <h4 class=\"panel-title\">Other Info</h4>\n            </div>\n            <div class=\"panel-body\">\n              <div class=\"row\">\n                Est. Date: {{acct.EstDate | date:'shortDate'}}\n              </div>\n              <div class=\"row\">\n                YTD Sales: {{acct.YTDSales | currency:'USD':true}}\n              </div>\n              <div class=\"row\">\n                Last Year Sales: {{acct.LYTDSales | currency:'USD':true}}\n              </div>\n              <div class=\"row\">\n                Terms: {{acct.TermsDescription}}\n              </div>\n            </div>\n          </div>\n        </div>\n        <!-- END: Other Info -->\n        \n      </div>\n      <!-- END: Drill-down view --> \n      \n     </td>\n   </tr>\n</template>\n  </tbody>\n</table>\n","functions":[{"method":"ngOnInit","code":"bezl.vars.loading = true;\n\nrequire(['https://cdn.rawgit.com/bezlio/bezlio-apps/1.3/roles/sales-rep/accounts-view/js/onStartup.js'], function(functions) {\n\tfunctions.onStartup(bezl)\n});","declares":["$","parm","bezl","dataResp","require"],"compiled":"bezl.vars.loading = true;\r\nrequire(['https://cdn.rawgit.com/bezlio/bezlio-apps/1.3/roles/sales-rep/accounts-view/js/onStartup.js'], function (functions) {\r\n    functions.onStartup(bezl);\r\n});\r\n"},{"method":"onDataChange","code":"bezl.data = dataResp;\n\nrequire(['https://cdn.rawgit.com/bezlio/bezlio-apps/1.3/roles/sales-rep/accounts-view/js/onDataChange.js'], function(functions) {\n\tfunctions.onDataChange(bezl)\n});","declares":["$","parm","bezl","dataResp","require"],"compiled":"bezl.data = dataResp;\r\nrequire(['https://cdn.rawgit.com/bezlio/bezlio-apps/1.3/roles/sales-rep/accounts-view/js/onDataChange.js'], function (functions) {\r\n    functions.onDataChange(bezl);\r\n});\r\n"},{"method":"clickAddress","code":"window.open('http://maps.google.com/maps?q=' + parm.AddressURL,'_blank');","declares":["$","parm","bezl","dataResp","require"],"compiled":"window.open('http://maps.google.com/maps?q=' + parm.AddressURL, '_blank');\r\n"},{"method":"refresh","code":"require(['https://cdn.rawgit.com/bezlio/bezlio-apps/1.3/roles/sales-rep/accounts-view/js/account.js'], function(functions) {\n\tfunctions.runQuery(bezl, 'Accounts')\n});\n\n$(bezl.container.nativeElement).find('#filterString')[0].value = \"\"; // Clear out the search filter box","declares":["$","parm","bezl","dataResp","require"],"compiled":"require(['https://cdn.rawgit.com/bezlio/bezlio-apps/1.3/roles/sales-rep/accounts-view/js/account.js'], function (functions) {\r\n    functions.runQuery(bezl, 'Accounts');\r\n});\r\n$(bezl.container.nativeElement).find('#filterString')[0].value = \"\"; // Clear out the search filter box\r\n"},{"method":"selectRow","code":"require(['https://cdn.rawgit.com/bezlio/bezlio-apps/1.3/roles/sales-rep/accounts-view/js/account.js'], function(functions) {\n\tfunctions.select(bezl, parm)\n});","declares":["$","parm","bezl","dataResp","require"],"compiled":"require(['https://cdn.rawgit.com/bezlio/bezlio-apps/1.3/roles/sales-rep/accounts-view/js/account.js'], function (functions) {\r\n    functions.select(bezl, parm);\r\n});\r\n"},{"method":"sort","code":"require(['https://cdn.rawgit.com/bezlio/bezlio-apps/1.3/roles/sales-rep/accounts-view/js/account.js'], function(functions) {\n\tfunctions.sort(bezl, parm)\n});","declares":["$","parm","bezl","dataResp","require"],"compiled":"require(['https://cdn.rawgit.com/bezlio/bezlio-apps/1.3/roles/sales-rep/accounts-view/js/account.js'], function (functions) {\r\n    functions.sort(bezl, parm);\r\n});\r\n"},{"method":"onFilterChange","code":"require(['https://cdn.rawgit.com/bezlio/bezlio-apps/1.3/roles/sales-rep/accounts-view/js/account.js'], function(functions) {\n\tfunctions.applyFilter(bezl)\n});","declares":["$","parm","bezl","dataResp","require"],"compiled":"require(['https://cdn.rawgit.com/bezlio/bezlio-apps/1.3/roles/sales-rep/accounts-view/js/account.js'], function (functions) {\r\n    functions.applyFilter(bezl);\r\n});\r\n"}],"datatrans":null,"data":"","id":"ace2c015-4244-4069-ab38-4eb1851ac4c6","type":"Bezl"}