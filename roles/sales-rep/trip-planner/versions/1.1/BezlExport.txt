{
  "id": "4a82fc1f-4ca0-4434-a3be-e27f07c774f5",
  "name": "Trip Planner",
  "template": "custom",
  "owner": "rschnable@saberlogic.com",
  "shares": [],
  "vars": [],
  "dataSubscriptions": [],
  "markup": [
    "<style>",
    "\t.input-group-btn > button { font-size: 14px; }",
    "  ",
    "  .startLocation {",
    "  \tborder: none;    ",
    "  }",
    "  ",
    "  .startLocationText {",
    "    padding-top: 3px;",
    "    padding-bottom: 3px;",
    "    height: 34px;",
    "  }",
    "  ",
    "  .btn66 {width: 66%}",
    "  .btn33 {width: 33%}",
    "</style>",
    "",
    "<div class=\"row\">",
    "  <div class=\"col-sm-12\">",
    "    <div class=\"row\">",
    "",
    "          <div class=\"col-sm-7\">",
    "            <div class=\"row\">",
    "              <div class=\"col-sm-12\">",
    "                <div class=\"panel panel-primary\">",
    "                  <div class=\"panel-heading\">",
    "                    <h3 class=\"panel-title\">Trip Details</h3>",
    "                  </div>",
    "                  <div class=\"panel-body\">",
    "                    <div class=\"row\">",
    "                      <table class=\"table\">",
    "                        <thead>",
    "                          <tr>",
    "                            <th></th>",
    "                            <th></th>",
    "                            <th>Name</th>",
    "                            <th>Address</th>",
    "                            <th></th>",
    "                          </tr>",
    "                         </thead>",
    "                        <tbody>",
    "                         <tr>",
    "                           <td>",
    "                             <button class=\"btn btn-sm btn-success mar-top\">",
    "                                <i class=\"fa fa-play-circle\" aria-hidden=\"true\"></i>",
    "                              </button>",
    "                           </td>",
    "                           <td colspan=\"4\">",
    "                             <div class=\"input-group form-control startLocation\" width=\"100%\">",
    "                              <input type=\"text\" class=\"form-control startLocationText\" onClick=\"this.setSelectionRange(0, this.value.length)\" [(ngModel)]=\"bezl.vars.currentAddress\">",
    "                              <span class=\"input-group-btn\">",
    "                                <button (click)=\"bezl.functions['updateAddress']()\" class=\"btn btn-md btn-primary\" style=\"margin-bottom:10px\">Update</button>",
    "                              </span>",
    "                            </div><!-- /input-group -->",
    "                           </td>",
    "                         </tr>",
    "                          <tr *ngFor=\"let item of bezl.vars.selectedCustomers; let i=index;\" (click)=\"bezl.functions['customerSelect'](item.key)\">",
    "                            <td>",
    "                              <button *ngIf=\"i < bezl.vars.selectedCustomers.length - 1\" (click)=\"bezl.functions['moveDown'](i)\" class=\"btn btn-sm btn-danger\">",
    "                                <i class=\"fa fa-arrow-down\" aria-hidden=\"true\"></i>",
    "                              </button>",
    "                              <button class=\"btn btn-sm btn-danger\" *ngIf=\"i >= bezl.vars.selectedCustomers.length - 1\" >",
    "                                <i class=\"fa fa-stop-circle\" aria-hidden=\"true\"></i>",
    "                              </button>",
    "                            </td>",
    "                            <td>",
    "                              <button *ngIf=\"i != 0\" (click)=\"bezl.functions['moveUp'](i)\" class=\"btn btn-sm btn-success\"><i class=\"fa fa-arrow-up\" aria-hidden=\"true\"></i></button>",
    "                            </td>",
    "                            <td>{{item.display}}</td>",
    "                            <td>{{item.address}}</td>",
    "                            <td>",
    "                              <button (click)=\"bezl.functions['customerRemove'](i)\" class=\"btn btn-sm btn-danger\"><i class=\"fa fa-times\" aria-hidden=\"true\"></i></button>",
    "                            </td>",
    "                          </tr>",
    "                        </tbody>",
    "                      </table>",
    "                    </div>",
    "                    <div class=\"row\">",
    "                      <button (click)=\"bezl.functions['navigate']()\" class=\"btn btn-md btn-primary\" [disabled]=\"bezl.vars.selectedCustomers.length == 0\">Navigate</button>",
    "                      <button (click)=\"bezl.functions['openMap']()\" class=\"btn btn-md btn-primary\" [disabled]=\"bezl.vars.selectedCustomers.length == 0\">Open Map</button>",
    "                    </div>",
    "                    ",
    "                    ",
    "                  </div>",
    "                </div>",
    "                 ",
    "              </div>",
    "            </div>",
    "            <div class=\"row\">",
    "              <div id=\"map\" class=\"map\" style=\"height: 450px; border-style: solid;\"></div>",
    "            </div>",
    "            <div class=\"row\">",
    "              <div id=\"directions\"></div>",
    "            </div>",
    "          </div>",
    "          <div class=\"col-sm-3\">",
    "            <div class=\"row\">",
    "              <div class=\"col-sm-8 form-horizontal\">",
    "                <div class=\"control-group row-fluid form-inline\">",
    "                  <label for=\"js-typeahead-customers\" class=\"control-label\">Search</label>",
    "                  <div class=\"controls\">",
    "                    <div class=\"typeahead__container\">",
    "                      <div class=\"typeahead__field\">",
    "                        <span class=\"typeahead__query\">",
    "                          <input class=\"js-typeahead-customers\" name=\"js-typeahead-customers\" type=\"search\" [(ngModel)]=\"bezl.vars.selectedCustomer.Name\"  autocomplete=\"off\">",
    "                        </span>",
    "                      </div>",
    "                    </div>",
    "                  </div>",
    "                </div>",
    "              </div>",
    "              <div class=\"col-sm-4 form-horizontal\">",
    "                <label for=\"customerFilter\" class=\"control-label\">Filter</label>",
    "    \t\t\t<select class=\"form-control\" name=\"customerFilter\" [ngModel]=\"bezl.vars.custCategory\" (ngModelChange)=\"bezl.functions.onCategoryChange($event)\">",
    "    \t\t\t\t<option *ngFor=\"let cat of bezl.data.Categories\" [ngValue]=cat.Type>{{cat.Type}}</option>",
    "    \t\t\t</select>",
    "   \t\t\t  </div>",
    "            </div>",
    "            ",
    "            <!-- Normal View -->",
    "            <div class=\"row hidden-xs\">",
    "              <table class=\"table table-hover\">",
    "                <thead>",
    "                  <tr>",
    "                    <th style=\"width:100%\">",
    "                      ",
    "                     <div class=\"btn-group btn-group-justified hidden-xs\" role=\"group\" aria-label=\"Justified button group\">",
    "                        <div class=\"btn-group btn66\" role=\"group\">",
    "                       <button type=\"button\" (click)=\"bezl.functions['sort']('Name')\" class=\"btn btn-default\" style=\"min-width: 100px\">",
    "                          <span class=\"pull-left\">Name</span>",
    "                          <i class=\"fa fa-sort-alpha-asc pull-right\" aria-hidden=\"true\" *ngIf=\"bezl.vars.sortCol != 'Name'\" style=\"visibility: hidden\"></i>",
    "                          <i class=\"fa fa-sort-alpha-asc pull-right\" aria-hidden=\"true\" *ngIf=\"bezl.vars.sortCol == 'Name' && bezl.vars.sort == 'asc'\"></i>",
    "                          <i class=\"fa fa-sort-alpha-desc pull-right\" aria-hidden=\"true\" *ngIf=\"bezl.vars.sortCol == 'Name' && bezl.vars.sort == 'desc'\"></i>",
    "                        </button>",
    "                       </div>",
    "                      ",
    "                      <div class=\"btn-group btn33\" role=\"group\">",
    "                         <button type=\"button\" (click)=\"bezl.functions['sort']('Distance')\" class=\"btn btn-default\" style=\"min-width: 100px\">",
    "                           <span class=\"pull-left\">Distance</span>",
    "                           <i class=\"fa fa-sort-numeric-asc pull-right\" aria-hidden=\"true\" *ngIf=\"bezl.vars.sortCol != 'Distance'\" style=\"visibility: hidden\"></i>",
    "                           <i class=\"fa fa-sort-numeric-asc pull-right\" aria-hidden=\"true\" *ngIf=\"bezl.vars.sortCol == 'Distance' && bezl.vars.sort == 'asc'\"></i>",
    "                           <i class=\"fa fa-sort-numeric-desc pull-right\" aria-hidden=\"true\" *ngIf=\"bezl.vars.sortCol == 'Distance' && bezl.vars.sort == 'desc'\"></i>",
    "                         </button>",
    "                       </div>",
    "                      </div>",
    "                      </th> ",
    "                  </tr>",
    "               </thead>",
    "                <tbody>",
    "                  <tr [hidden]=\"!bezl.vars.loading.customerList\"> <label class=\"pull-right\" style=\"margin-top: 5px;\">Loading... <i class=\"fa fa-spinner fa-spin\" style=\"font-size:24px\"></i></label></tr>",
    "                  <tr class=\"read\" *ngFor=\"let item of bezl.vars.customers\" (click)=\"bezl.functions['customerSelect'](item.key)\">",
    "                   \t<div class=\"row col-md-12\">",
    "                      <br>",
    "                      <div class=\"col-md-2\"><button (click)=\"bezl.functions.customerAdd(item)\" class=\"btn btn-sm btn-primary\">+</button></div>",
    "                      <div class=\"col-md-6\">{{item.display}}</div>",
    "                      <div class=\"col-md-4\" align=\"right\">{{item.distance}}</div>",
    "                    </div>",
    "                  </tr>",
    "                </tbody>",
    "              </table>",
    "            </div>",
    "            ",
    "            <!-- Mobile View -->",
    "             <div class=\"row visible-xs\">",
    "              <table class=\"table table-hover\">",
    "                <thead>",
    "                  <tr [hidden]=\"!bezl.vars.loading.customerList\"><label class=\"pull-right\" style=\"margin-top: 5px;\">Loading... <i class=\"fa fa-spinner fa-spin\" style=\"font-size:24px\"></i></label></tr>",
    "                  <tr>",
    "                    <h4>Sort by: </h4> ",
    "                      <div class=\"btn-group btn-group-justified\" role=\"group\" aria-label=\"Justified button group\">",
    "                        <div class=\"btn-group\" role=\"group\">",
    "                       <button type=\"button\" (click)=\"bezl.functions['sort']('Name')\"class=\"btn btn-default\" style=\"min-width: 100px\">",
    "                          <span class=\"pull-left\">Name</span>",
    "                          <i class=\"fa fa-sort-alpha-asc pull-right\" aria-hidden=\"true\" *ngIf=\"bezl.vars.sortCol != 'Name'\" style=\"visibility: hidden\"></i>",
    "                          <i class=\"fa fa-sort-alpha-asc pull-right\" aria-hidden=\"true\" *ngIf=\"bezl.vars.sortCol == 'Name' && bezl.vars.sort == 'asc'\"></i>",
    "                          <i class=\"fa fa-sort-alpha-desc pull-right\" aria-hidden=\"true\" *ngIf=\"bezl.vars.sortCol == 'Name' && bezl.vars.sort == 'desc'\"></i>",
    "                        </button>",
    "                       </div>",
    "                        ",
    "                   <div class=\"btn-group\" role=\"group\">",
    "                         <button type=\"button\" (click)=\"bezl.functions['sort']('Distance')\"class=\"btn btn-default\" style=\"min-width: 100px\">",
    "                           <span class=\"pull-left\">Distance</span>",
    "                           <i class=\"fa fa-sort-numeric-asc pull-right\" aria-hidden=\"true\" *ngIf=\"bezl.vars.sortCol != 'Distance'\" style=\"visibility: hidden\"></i>",
    "                           <i class=\"fa fa-sort-numeric-asc pull-right\" aria-hidden=\"true\" *ngIf=\"bezl.vars.sortCol == 'Distance' && bezl.vars.sort == 'asc'\"></i>",
    "                           <i class=\"fa fa-sort-numeric-desc pull-right\" aria-hidden=\"true\" *ngIf=\"bezl.vars.sortCol == 'Distance' && bezl.vars.sort == 'desc'\"></i>",
    "                         </button>",
    "                       </div>",
    "                 </div>    ",
    "                      ",
    "                 ",
    "                </tr>",
    "               </thead>",
    "                <tbody>",
    "                   <tr class=\"read\" *ngFor=\"let item of bezl.vars.customers\" (click)=\"bezl.functions['customerSelect'](item.key)\">",
    "                     <td>",
    "                      <div class=\"row col-md-12\">",
    "                        <br>",
    "                        <div>Add to trip: <button (click)=\"bezl.functions['customerAdd'](item)\" class=\"btn btn-sm btn-primary\">+</button></div>",
    "                        <div>Customer: {{item.display}}</div>",
    "                        <div>Distance: {{item.distance}} miles</div>",
    "                      </div>",
    "                     </td>",
    "                  </tr>",
    "                </tbody>",
    "              </table>",
    "            </div>",
    "  </div>",
    "</div>"
  ],
  "functions": [
    {
      "method": "ngOnInit",
      "code": "bezl.vars.currentAddress = \"\";\nbezl.vars.markers = [];\nbezl.vars.customers = [];\nbezl.vars.selectedCustomer = { \"CustNum\": 0 };\nbezl.vars.selectedCustomers = [];\nbezl.vars.custCategory = 'All';\nbezl.vars.Column = 'CustomerType';\nbezl.vars.loading = { \n  customerList: true\n}\n\nbezl.functions['setConfig']();\nrequire([bezl.vars.config.baseJsUrl + 'onStartup.js'], function(onStartup) {\n  onStartup.onStartup(bezl);\n});",
      "declares": [
        "$",
        "parm",
        "bezl",
        "dataResp",
        "require"
      ],
      "compiled": "bezl.vars.currentAddress = \"\";\r\nbezl.vars.markers = [];\r\nbezl.vars.customers = [];\r\nbezl.vars.selectedCustomer = { \"CustNum\": 0 };\r\nbezl.vars.selectedCustomers = [];\r\nbezl.vars.custCategory = 'All';\r\nbezl.vars.Column = 'CustomerType';\r\nbezl.vars.loading = {\r\n    customerList: true\r\n};\r\nbezl.functions['setConfig']();\r\nrequire([bezl.vars.config.baseJsUrl + 'onStartup.js'], function (onStartup) {\r\n    onStartup.onStartup(bezl);\r\n});\r\n"
    },
    {
      "method": "onDataChange",
      "code": "bezl.data = dataResp;\n\nbezl.functions['setConfig']();\nrequire([bezl.vars.config.baseJsUrl + 'onDataChange.js'], function(onDataChange) {\n  onDataChange.onDataChange(bezl);\n});\n",
      "declares": [
        "$",
        "parm",
        "bezl",
        "dataResp",
        "require"
      ],
      "compiled": "bezl.data = dataResp;\r\nbezl.functions['setConfig']();\r\nrequire([bezl.vars.config.baseJsUrl + 'onDataChange.js'], function (onDataChange) {\r\n    onDataChange.onDataChange(bezl);\r\n});\r\n"
    },
    {
      "method": "refresh",
      "code": "require([bezl.vars.config.baseJsUrl + 'onStartup.js'], function(customer) {\n  customer.runQuery(bezl, parm);\n});",
      "declares": [
        "$",
        "parm",
        "bezl",
        "dataResp",
        "require"
      ],
      "compiled": "require([bezl.vars.config.baseJsUrl + 'onStartup.js'], function (customer) {\r\n    customer.runQuery(bezl, parm);\r\n});\r\n"
    },
    {
      "method": "updateAddress",
      "code": "require([bezl.vars.config.baseJsUrl + 'map.js'], function(map) {\n  map.updateAddress(bezl);\n});",
      "declares": [
        "$",
        "parm",
        "bezl",
        "dataResp",
        "require"
      ],
      "compiled": "require([bezl.vars.config.baseJsUrl + 'map.js'], function (map) {\r\n    map.updateAddress(bezl);\r\n});\r\n"
    },
    {
      "method": "sort",
      "code": "require([bezl.vars.config.baseJsUrl + 'customer.js'], function(customer) {\n  customer.sort(bezl, parm);\n});",
      "declares": [
        "$",
        "parm",
        "bezl",
        "dataResp",
        "require"
      ],
      "compiled": "require([bezl.vars.config.baseJsUrl + 'customer.js'], function (customer) {\r\n    customer.sort(bezl, parm);\r\n});\r\n"
    },
    {
      "method": "customerSelect",
      "code": "require([bezl.vars.config.baseJsUrl + 'customer.js'], function(customer) {\n  customer.select(bezl, parm);\n});",
      "declares": [
        "$",
        "parm",
        "bezl",
        "dataResp",
        "require"
      ],
      "compiled": "require([bezl.vars.config.baseJsUrl + 'customer.js'], function (customer) {\r\n    customer.select(bezl, parm);\r\n});\r\n"
    },
    {
      "method": "customerAdd",
      "code": "require([bezl.vars.config.baseJsUrl + 'customer.js'], function(customer) {\n  customer.add(bezl, parm);\n});",
      "declares": [
        "$",
        "parm",
        "bezl",
        "dataResp",
        "require"
      ],
      "compiled": "require([bezl.vars.config.baseJsUrl + 'customer.js'], function (customer) {\r\n    customer.add(bezl, parm);\r\n});\r\n"
    },
    {
      "method": "customerRemove",
      "code": "require([bezl.vars.config.baseJsUrl + 'customer.js'], function(customer) {\n  customer.remove(bezl, parm);\n});",
      "declares": [
        "$",
        "parm",
        "bezl",
        "dataResp",
        "require"
      ],
      "compiled": "require([bezl.vars.config.baseJsUrl + 'customer.js'], function (customer) {\r\n    customer.remove(bezl, parm);\r\n});\r\n"
    },
    {
      "method": "moveDown",
      "code": "require([bezl.vars.config.baseJsUrl + 'customer.js'], function(customer) {\n  customer.move(bezl, parm, 1);\n});\n",
      "declares": [
        "$",
        "parm",
        "bezl",
        "dataResp",
        "require"
      ],
      "compiled": "require([bezl.vars.config.baseJsUrl + 'customer.js'], function (customer) {\r\n    customer.move(bezl, parm, 1);\r\n});\r\n"
    },
    {
      "method": "moveUp",
      "code": "require([bezl.vars.config.baseJsUrl + 'customer.js'], function(customer) {\n  customer.move(bezl, parm, -1);\n});\n",
      "declares": [
        "$",
        "parm",
        "bezl",
        "dataResp",
        "require"
      ],
      "compiled": "require([bezl.vars.config.baseJsUrl + 'customer.js'], function (customer) {\r\n    customer.move(bezl, parm, -1);\r\n});\r\n"
    },
    {
      "method": "setConfig",
      "code": "bezl.vars.config = {};\nbezl.vars.config.GoogleAPIKey = 'AIzaSyDdandbc5e5BYufNbdp8q8f4QKY_Dvw6xI';\n\n// *********************************************************************************\n// Configuration Variables\n// Only edit these if you know what you are doing.\n// version: The version number of this app. Setting this vill use the javascript\n//          include files in the corresponding \"versions\" subfolder. An empty string\n//          will use the \"development\" javascript files in the root directory.\n// libVersion: The version number of the library javascript include files to use.\n// baseUrl: The base URL of the javascript include files. Generally this should be an\n//          empty string and the correct path will be automatically determined.\n//          However, for development you may wish to point this to a RawGit URL of\n//          a specific branch (e.g. https://rawgit.com/bezlio/bezlio-apps/my-branch).\nbezl.vars.config.version = \"1.1\";\nbezl.vars.config.libVersion = \"1.0\";\nbezl.vars.config.baseUrl = \"\";\n// *********************************************************************************\n\n// If the baseURL is not set above then we will determine a sane default based on the URL\nif (bezl.vars.config.baseUrl == \"\") {\n    if (window.location.href.indexOf(\"portal-dev.bezl.io\") !== -1) {\n        bezl.vars.config.baseUrl = \"https://apps-dev.bezl.io\";\n    } else {\n        bezl.vars.config.baseUrl = \"https://apps.bezl.io\";\n    }\n}\n\n// If version numbers exist above they will also be added to the javascript include URLs\nbezl.vars.config.baseJsUrl = bezl.vars.config.baseUrl\n  \t\t\t\t\t\t\t+ \"/roles/sales-rep/trip-planner/\"\n  \t\t\t\t\t\t\t+ (bezl.vars.config.version ? \"versions/\" + bezl.vars.config.version + \"/\" : \"\")\n  \t\t\t\t\t\t\t+ \"js/\"\nbezl.vars.config.baseLibraryUrl = bezl.vars.config.baseUrl\n  \t\t\t\t\t\t\t+ \"/libraries/\"\n\t\t\t\t\t\t\t+ (bezl.vars.config.libVersion ? \"versions/\" + bezl.vars.config.libVersion + \"/\" : \"\")",
      "declares": [
        "$",
        "parm",
        "bezl",
        "dataResp",
        "require",
        "FusionCharts"
      ],
      "compiled": "bezl.vars.config = {};\r\nbezl.vars.config.GoogleAPIKey = 'AIzaSyDdandbc5e5BYufNbdp8q8f4QKY_Dvw6xI';\r\n// *********************************************************************************\r\n// Configuration Variables\r\n// Only edit these if you know what you are doing.\r\n// version: The version number of this app. Setting this vill use the javascript\r\n//          include files in the corresponding \"versions\" subfolder. An empty string\r\n//          will use the \"development\" javascript files in the root directory.\r\n// libVersion: The version number of the library javascript include files to use.\r\n// baseUrl: The base URL of the javascript include files. Generally this should be an\r\n//          empty string and the correct path will be automatically determined.\r\n//          However, for development you may wish to point this to a RawGit URL of\r\n//          a specific branch (e.g. https://rawgit.com/bezlio/bezlio-apps/my-branch).\r\nbezl.vars.config.version = \"1.1\";\r\nbezl.vars.config.libVersion = \"1.0\";\r\nbezl.vars.config.baseUrl = \"\";\r\n// *********************************************************************************\r\n// If the baseURL is not set above then we will determine a sane default based on the URL\r\nif (bezl.vars.config.baseUrl == \"\") {\r\n    if (window.location.href.indexOf(\"portal-dev.bezl.io\") !== -1) {\r\n        bezl.vars.config.baseUrl = \"https://apps-dev.bezl.io\";\r\n    }\r\n    else {\r\n        bezl.vars.config.baseUrl = \"https://apps.bezl.io\";\r\n    }\r\n}\r\n// If version numbers exist above they will also be added to the javascript include URLs\r\nbezl.vars.config.baseJsUrl = bezl.vars.config.baseUrl + \"/roles/sales-rep/trip-planner/\" + (bezl.vars.config.version ? \"versions/\" + bezl.vars.config.version + \"/\" : \"\") + \"js/\";\r\nbezl.vars.config.baseLibraryUrl = bezl.vars.config.baseUrl + \"/libraries/\" + (bezl.vars.config.libVersion ? \"versions/\" + bezl.vars.config.libVersion + \"/\" : \"\");\r\n"
    },
    {
      "method": "navigate",
      "code": "require([bezl.vars.config.baseJsUrl + 'map.js'], function(map) {\n  map.navigate(bezl);\n});",
      "declares": [
        "$",
        "parm",
        "bezl",
        "dataResp",
        "require"
      ],
      "compiled": "require([bezl.vars.config.baseJsUrl + 'map.js'], function (map) {\r\n    map.navigate(bezl);\r\n});\r\n"
    },
    {
      "method": "openMap",
      "code": "require([bezl.vars.config.baseJsUrl + 'map.js'], function(map) {\n  map.openMap(bezl);\n});\n",
      "declares": [
        "$",
        "parm",
        "bezl",
        "dataResp",
        "require"
      ],
      "compiled": "require([bezl.vars.config.baseJsUrl + 'map.js'], function (map) {\r\n    map.openMap(bezl);\r\n});\r\n"
    },
    {
      "method": "onCategoryChange",
      "code": "require([bezl.vars.config.baseJsUrl + 'customer.js'], function(functions) {\n\tfunctions.applyCategory(bezl, parm)\n});",
      "declares": [
        "$",
        "parm",
        "bezl",
        "dataResp",
        "require"
      ],
      "compiled": "require([bezl.vars.config.baseJsUrl + 'customer.js'], function (functions) {\r\n    functions.applyCategory(bezl, parm);\r\n});\r\n"
    }
  ],
  "data": ""
}
