{"name":"Order Entry","template":"custom","owner":"bellis@saberlogic.com","shares":[],"vars":[],"dataSubscriptions":[],"markup":"<div class=\"row\">\n  <div class=\"col-sm-12\">\n    <div class=\"row\">\n      <!--Panel with Tabs-->\n      <!--===================================================-->\n      <div class=\"panel panel-primary\">\n\n        <!--Panel heading-->\n        <div class=\"panel-heading\">\n          <div class=\"panel-control\">\n          </div>\n        </div>\n        <!--Panel body-->\n        <div class=\"panel-body\">\n          <div class=\"row\" *ngIf=\"bezl.vars.loading || bezl.vars.loadingContacts || bezl.vars.loadingShipTos\">\n            <label>Loading Customer Info... <i class=\"fa fa-spinner fa-spin\" style=\"font-size:24px\"></i></label>\n          </div>\n          <div class=\"row\" *ngIf=\"!bezl.vars.loading && !bezl.vars.loadingContacts && !bezl.vars.loadingShipTos\">\n            <!-- Begin Sold To Section -->\n            <div class=\"col-sm-1\"></div>\n            <div class=\"col-sm-5 mar-rgt panel panel-default\">\n              <!-- Begin Customer Select Table -->\n              <div class=\"row\">\n                <table class=\"table\" style=\"margin-bottom: 0px;\">\n                  <tbody>\n                    <tr><td><h4>Sold To</h4></td>\n                      <td>\n                        <select class=\"form-control\" *ngIf=\"bezl.vars.Customers != null\" (change)=\"bezl.functions['selectCustomer']($event.target.value)\">\n                          <option value=\"\"></option>\n                          <option *ngFor=\"let item of bezl.vars.Customers\" [value]=\"item.ID\">{{item.Name}}</option>\n                        </select>\n                      </td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n              <!-- End Customer Select Table -->\n              <!-- Begin Sold To Details -->\n              <div class=\"row\" *ngIf=\"bezl.vars.selectedCustomer != null\">\n                <div class=\"table-responsive\">\n                  <table class=\"table\">\n                    <thead>\n                      <th width=\"20%\"></th>\n                      <th width=\"80%\"></th>\n                    </thead>\n                    <tbody>\n                      <tr *ngIf=\"bezl.vars.selectedCustomer.Name != ''\"><td><b>Name</b></td><td>{{bezl.vars.selectedCustomer.Name}}</td></tr>\n                      <tr *ngIf=\"bezl.vars.selectedCustomer.Address1 != ''\"><td><b>Address 1</b></td><td>{{bezl.vars.selectedCustomer.Address1}}</td></tr>\n                      <tr *ngIf=\"bezl.vars.selectedCustomer.Address2 != ''\"><td><b>Address 2</b></td><td>{{bezl.vars.selectedCustomer.Address2}}</td></tr>\n                      <tr *ngIf=\"bezl.vars.selectedCustomer.Address3 != ''\"><td><b>Address 3</b></td><td>{{bezl.vars.selectedCustomer.Address3}}</td></tr>\n                      <tr *ngIf=\"bezl.vars.selectedCustomer.City != ''\"><td><b>City</b></td><td>{{bezl.vars.selectedCustomer.City}}</td></tr>\n                      <tr *ngIf=\"bezl.vars.selectedCustomer.State != ''\"><td><b>State</b></td><td>{{bezl.vars.selectedCustomer.State}}</td></tr>\n                      <tr *ngIf=\"bezl.vars.selectedCustomer.ZIP != ''\"><td><b>Zip</b></td><td>{{bezl.vars.selectedCustomer.ZIP}}</td></tr>\n                      <tr *ngIf=\"bezl.vars.selectedCustomer != null\">\n                        <td><b>Attention</b></td>\n                        <td>\n                          <select class=\"form-control\" [(ngModel)]=\"bezl.vars.selectedCustomer.Attention\" *ngIf=\"bezl.vars.selectedCustomer && bezl.vars.selectedCustomer.Contacts && bezl.vars.selectedCustomer.Contacts.length > 0\">\n                            <option value=\"\"></option>\n                            <option *ngFor=\"let item of bezl.vars.selectedCustomer.Contacts\" [value]=\"item.ContactId\">{{item.ContactName}}</option>\n                          </select>\n                        </td>\n                      </tr>\n                    </tbody>\n                  </table>\n                </div>\n              </div>\n              <!-- End Sold To Details -->\n            </div>\n            <!-- End Sold To Section -->\n            \n            <!-- Begin Ship To Section -->\n            <div class=\"col-sm-5 panel panel-default\">\n              <div class=\"row\">\n                <table class=\"table\" style=\"margin-bottom: 0px;\">\n                  <tbody>\n                    <tr><td><h4>Ship To</h4></td>\n                      <td>\n                        <select class=\"form-control\" [(ngModel)]=\"bezl.vars.ShipToNum\" *ngIf=\"bezl.vars.selectedCustomer && bezl.vars.selectedCustomer.ShipTos && bezl.vars.selectedCustomer.ShipTos.length > 0\" (change)=\"bezl.functions['selectShipTo']($event.target.value)\">\n                          <option *ngFor=\"let item of bezl.vars.selectedCustomer.ShipTos\" [value]=\"item.ShipToNum\">{{item.ShipToNum}}</option>\n                          <option value=\"CreateNew\">--Create New--</option>\n                        </select>\n                      </td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n              <div *ngIf=\"bezl.vars.selectedShipTo != null && bezl.vars.ShipToNum != 'CreateNew'\">\n                <div class=\"table-responsive\">\n                  <table class=\"table\">\n                    <thead>\n                      <th width=\"20%\"></th>\n                      <th width=\"80%\"></th>\n                    </thead>\n                    <tbody>\n                      <tr *ngIf=\"bezl.vars.selectedShipTo.Name != ''\"><td><b>Name</b></td><td>{{bezl.vars.selectedShipTo.Name}}</td></tr>\n                      <tr *ngIf=\"bezl.vars.selectedShipTo.Address1 != ''\"><td><b>Address 1</b></td><td>{{bezl.vars.selectedShipTo.Address1}}</td></tr>\n                      <tr *ngIf=\"bezl.vars.selectedShipTo.Address2 != ''\"><td><b>Address 2</b></td><td>{{bezl.vars.selectedShipTo.Address2}}</td></tr>\n                      <tr *ngIf=\"bezl.vars.selectedShipTo.Address3 != ''\"><td><b>Address 3</b></td><td>{{bezl.vars.selectedShipTo.Address3}}</td></tr>\n                      <tr *ngIf=\"bezl.vars.selectedShipTo.City != ''\"><td><b>City</b></td><td>{{bezl.vars.selectedShipTo.City}}</td></tr>\n                      <tr *ngIf=\"bezl.vars.selectedShipTo.State != ''\"><td><b>State</b></td><td>{{bezl.vars.selectedShipTo.State}}</td></tr>\n                      <tr *ngIf=\"bezl.vars.selectedShipTo.Zip != ''\"><td><b>Zip</b></td><td>{{bezl.vars.selectedShipTo.Zip}}</td></tr>\n                      <tr *ngIf=\"bezl.vars.selectedCustomer != null\">\n                        <td><b>Attention</b></td>\n                        <td>\n                          <select class=\"form-control\" [(ngModel)]=\"bezl.vars.selectedShipTo.Attention\" *ngIf=\"bezl.vars.selectedCustomer && bezl.vars.selectedCustomer.Contacts && bezl.vars.selectedCustomer.Contacts.length > 0\">\n                            <option value=\"\"></option>\n                            <option *ngFor=\"let item of bezl.vars.selectedCustomer.Contacts\" [value]=\"item.ContactId\">{{item.ContactName}}</option>\n                          </select>\n                        </td>\n                      </tr>\n                    </tbody>\n                  </table>\n                </div>\n              </div>\n              <div *ngIf=\"bezl.vars.ShipToNum == 'CreateNew'\">\n                <div class=\"table-responsive\">\n                  <table class=\"table\">\n                    <thead>\n                      <th width=\"20%\"></th>\n                      <th width=\"80%\"></th>\n                    </thead>\n                    <tbody>\n                      <tr><td><b>Name</b></td><td><input class=\"form-control\" type=\"text\" [(ngModel)]=\"bezl.vars.selectedShipTo.Name\"></td></tr>\n                      <tr><td><b>Address 1</b></td><td><input class=\"form-control\" type=\"text\" [(ngModel)]=\"bezl.vars.selectedShipTo.Address1\"></td></tr>\n                      <tr><td><b>Address 2</b></td><td><input class=\"form-control\" type=\"text\" [(ngModel)]=\"bezl.vars.selectedShipTo.Address2\"></td></tr>\n                      <tr><td><b>Address 3</b></td><td><input class=\"form-control\" type=\"text\" [(ngModel)]=\"bezl.vars.selectedShipTo.Address3\"></td></tr>\n                      <tr><td><b>City</b></td><td><input class=\"form-control\" type=\"text\" [(ngModel)]=\"bezl.vars.selectedShipTo.City\"></td></tr>\n                      <tr><td><b>State</b></td><td><input class=\"form-control\" type=\"text\" [(ngModel)]=\"bezl.vars.selectedShipTo.State\"></td></tr>\n                      <tr><td><b>Zip</b></td><td><input class=\"form-control\" type=\"text\" [(ngModel)]=\"bezl.vars.selectedShipTo.Zip\"></td></tr>\n                      <tr *ngIf=\"bezl.vars.filteredContacts != null\">\n                        <td><b>Attention</b></td>\n                        <td>\n                          <select class=\"form-control\" [(ngModel)]=\"bezl.vars.selectedShipTo.Attention\">\n                            <option value=\"\"></option>\n                            <option *ngFor=\"let item of bezl.vars.filteredContacts\" [value]=\"item.ContactName\">{{item.ContactName}}</option>\n                          </select>\n                        </td>\n                      </tr>\n                    </tbody>\n                  </table>\n                </div>\n              </div>\n            </div>\n            <!-- End Ship To Section -->\n        \n          </div>\n          <hr />\n          <div class=\"row\" *ngIf=\"bezl.vars.selectedCustomer.ID == null || bezl.vars.selectedCustomer.ID == ''\">\n            <label class=\"form-control\">Select A Customer To Continue</label>\n          </div>\n          <div class=\"row\" *ngIf=\"bezl.vars.selectedCustomer.ID != null && bezl.vars.selectedCustomer.ID != ''\">\n            <div class=\"col-sm-1\"></div>\n            <div class=\"col-sm-5 mar-rgt panel panel-default table-responsive\">\n              <h4>Header</h4>\n              <table class=\"table\">\n                 <thead>\n                  <tr>\n                   <th width=\"30%\"></th>\n                   <th width=\"70%\"></th>\n                  </tr>\n                 </thead>\n                <tbody>\n                  <tr><td><b>PO:</b></td><td><input class=\"form-control\" type=\"text\" [(ngModel)]=\"bezl.vars.PONumber\"></td></tr>\n                  <tr><td><b>Order Date:</b></td><td><input type=\"date\" [(ngModel)]=\"bezl.vars.OrderDate\"></td></tr>\n                  <tr><td><b>Need By:</b></td><td><input type=\"date\" [(ngModel)]=\"bezl.vars.NeedBy\"></td></tr>\n                  <tr><td><b>Ship By:</b></td><td><input type=\"date\" [(ngModel)]=\"bezl.vars.ShipBy\"></td></tr>\n                  <tr>\n                    <td><b>Ship Via:</b></td>\n                    <td>\n                      <select class=\"form-control\" [(ngModel)]=\"bezl.vars.ShipVia\" *ngIf=\"bezl.vars.shipVias && bezl.vars.shipVias.length > 0\">\n                        <option *ngFor=\"let item of bezl.vars.shipVias\" [value]=\"item.ShipViaCode\">{{item.Description}}</option>\n                      </select>\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n            <div class=\"col-sm-5\">\n              <div class=\"row panel panel-default table-responsive\">\n                <h4>Summary</h4>\n                <table class=\"table\">\n                   <thead>\n                    <tr>\n                     <th width=\"30%\"></th>\n                     <th width=\"70%\"></th>\n                    </tr>\n                   </thead>\n                  <tbody>\n                    <tr><td><b>Order Total:</b></td><td><label class=\"form-control\" type=\"text\" disabled>{{bezl.vars.orderTotal | currency:'USD':true:'1.2-2'}}</label></td></tr>\n                  </tbody>\n                </table>\n              </div>\n              <div class=\"row panel panel-default table-responsive\">\n                <table class=\"table\">\n                   <thead>\n                    <tr>\n                      <th width=\"30%\"></th>\n                      <th width=\"70%\"></th>\n                    </tr>\n                   </thead>\n                  <tbody>\n                    <tr><td><b>Order Comment</b></td><td><textarea rows=\"4\" class=\"form-control\" [(ngModel)]=\"bezl.vars.OrderComment\"></textarea></td></tr>\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          </div>\n          <hr />\n          <div class=\"row\" *ngIf=\"bezl.vars.selectedCustomer.ID == null || bezl.vars.selectedCustomer.ID == ''\">\n            <label class=\"form-control\">Select A Customer To Continue</label>\n          </div>\n          <div *ngIf=\"bezl.vars.selectedCustomer.ID != null && bezl.vars.selectedCustomer.ID != ''\">\n            <div class=\"row\" *ngIf=\"bezl.vars.loadingGlobalParts || bezl.vars.loadingParts\">\n              <label>Loading Part Info... <i class=\"fa fa-spinner fa-spin\" style=\"font-size:24px\"></i></label>\n            </div>\n            <div class=\"row\" [hidden]=\"bezl.vars.loadingGlobalParts || bezl.vars.loadingParts\">\n              <div class=\"col-sm-12 mar-btm\">\n                <div class=\"col-sm-4\">\n                  <div class=\"typeahead__container\">\n                    <div class=\"typeahead__field\">\n                      <span class=\"typeahead__query\">\n                        <input class=\"partList\" name=\"partList\" type=\"search\" autocomplete=\"off\">\n                      </span>\n                    </div>\n                  </div>\n                </div>\n                <div class=\"col-sm-2\">\n                  <button (click)=\"bezl.functions['addPart']()\" class=\"btn btn-md btn-primary\">Add</button>\n                </div>\n              </div>\n            </div>\n            <div class=\"row\">\n              <div class=\"col-sm-12 table-responsive\">\n                <table class=\"table table-hover\">\n                  <thead>\n                    <th></th>\n                    <th>Part</th>\n                    <th>Description</th>\n                    <th>Qty</th>\n                    <th>UOM</th>\n                    <th>Stock</th>\n                    <th>Price</th>\n                    <th>Ext</th>\n                    <th>Comment</th>\n                  </thead>\n                  <tbody>\n                    <tr *ngFor=\"let part of bezl.vars.partList; let i = index;\">\n                      <td width=\"5%\"><button (click)=\"bezl.functions['delPart'](i)\" class=\"btn btn-sm btn-danger\"><i class=\"fa fa-times\" aria-hidden=\"true\"></i></button></td>\n                      <td width=\"10%\"><label class=\"form-control\" disabled>{{part.PartNum}}</label></td>\n                      <td width=\"20%\"><label class=\"form-control\" disabled>{{part.PartDescription}}</label></td>\n                      <td width=\"10%\"><input class=\"form-control\" type=\"number\" [(ngModel)]=\"part.Qty\" (change)=\"bezl.functions['qtyChange']()\"></td>\n                      <td width=\"10%\"><label class=\"form-control\" disabled>{{part.UOM}}</label></td>\n                      <td width=\"5%\"><label class=\"form-control\" disabled>{{part.QtyOnHand}}</label></td>\n                      <td width=\"10%\"><label class=\"form-control\" disabled>{{part.UnitPrice | currency:'USD':true:'1.2-2'}}</label></td>\n                      <td width=\"10%\"><label class=\"form-control\" disabled>{{part.Qty * part.UnitPrice | currency:'USD':true:'1.2-2'}}</label></td>\n                      <td width=\"20%\"><input class=\"form-control\" type=\"text\" [(ngModel)]=\"part.Comment\"></td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n            </div>\n            <div class=\"row\" *ngIf=\"bezl.vars.newOrder\">\n              <label>Loading Order Info... <i class=\"fa fa-spinner fa-spin\" style=\"font-size:24px\"></i></label>\n            </div>\n            <div class=\"row\" *ngIf=\"bezl.vars.submitOrder\">\n              <label>Submitting Order... <i class=\"fa fa-spinner fa-spin\" style=\"font-size:24px\"></i></label>\n            </div>\n            <div class=\"row\" [hidden]=\"bezl.vars.loading || bezl.vars.loadingContacts || bezl.vars.loadingShipTos || bezl.vars.loadingGlobalParts || bezl.vars.loadingParts || bezl.vars.newOrder || bezl.vars.submitOrder\">\n              <div class=\"col-sm-12\">\n                <button (click)=\"bezl.functions['submitOrder']()\" class=\"btn btn-md btn-primary\">Submit</button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <!--===================================================-->\n      <!--End of panel-->\n    </div>\n  </div>\n</div>\n\n{{bezl.vars.customers | json}}","functions":[{"method":"ngOnInit","code":"bezl.vars.loading = true;\nbezl.vars.Platform = 'Epicor10';\nbezl.vars.company = 'EPIC06';\nbezl.vars.connection = 'Epicor 10 AE';\nbezl.vars.partList = [];\nbezl.vars.orderTotal = 0;\nbezl.vars.selectedCustomer = {};\n\nrequire(['https://rawgit.com/bezlio/bezlio-apps/development/roles/customer-portal/order-entry/js/onStartup.js'], function(functions) {\n\tfunctions.onStartup(bezl)\n});","declares":["$","parm","bezl","dataResp","require"],"compiled":"bezl.vars.loading = true;\r\nbezl.vars.Platform = 'Epicor10';\r\nbezl.vars.company = 'EPIC06';\r\nbezl.vars.connection = 'Epicor 10 AE';\r\nbezl.vars.partList = [];\r\nbezl.vars.orderTotal = 0;\r\nbezl.vars.selectedCustomer = {};\r\nrequire(['https://rawgit.com/bezlio/bezlio-apps/development/roles/customer-portal/order-entry/js/onStartup.js'], function (functions) {\r\n    functions.onStartup(bezl);\r\n});\r\n"},{"method":"onDataChange","code":"bezl.data = dataResp;\n\nrequire(['https://rawgit.com/bezlio/bezlio-apps/development/roles/customer-portal/order-entry/js/onDataChange.js'], function(functions) {\n\tfunctions.onDataChange(bezl);\n});","declares":["$","parm","bezl","dataResp","require"],"compiled":"bezl.data = dataResp;\r\nrequire(['https://rawgit.com/bezlio/bezlio-apps/development/roles/customer-portal/order-entry/js/onDataChange.js'], function (functions) {\r\n    functions.onDataChange(bezl);\r\n});\r\n"},{"method":"selectCustomer","code":"require(['https://rawgit.com/bezlio/bezlio-apps/development/roles/customer-portal/order-entry/js/customer.js'], function(functions) {\n  \t// Since we are only getting the id we need to query to return just the row\n\tfunctions.select(bezl, bezl.vars.Customers.find(a => a.ID == parm));\n  \n  \t// Select the default\n  \tbezl.vars.ShipToNum = \"\";\n  \tbezl.functions['selectShipTo']('');\n});","declares":["$","parm","bezl","dataResp","require"],"compiled":"require(['https://rawgit.com/bezlio/bezlio-apps/development/roles/customer-portal/order-entry/js/customer.js'], function (functions) {\r\n    // Since we are only getting the id we need to query to return just the row\r\n    functions.select(bezl, bezl.vars.Customers.find(function (a) { return a.ID == parm; }));\r\n    // Select the default\r\n    bezl.vars.ShipToNum = \"\";\r\n    bezl.functions['selectShipTo']('');\r\n});\r\n"},{"method":"selectShipTo","code":"require(['https://rawgit.com/bezlio/bezlio-apps/development/roles/customer-portal/order-entry/js/customer.js'], function(functions) {\n  \t// Since we are only getting the id we need to query to return just the row\n  \tif (parm != 'CreateNew') {\n\t\tfunctions.selectShipTo(bezl, bezl.vars.selectedCustomer.ShipTos.find(st => st.ID == bezl.vars.selectedCustomer.ID && st.ShipToNum == parm));\n    } else {\n    \tbezl.vars.selectedShipTo = {}; \n    }\n});","declares":["$","parm","bezl","dataResp","require"],"compiled":"require(['https://rawgit.com/bezlio/bezlio-apps/development/roles/customer-portal/order-entry/js/customer.js'], function (functions) {\r\n    // Since we are only getting the id we need to query to return just the row\r\n    if (parm != 'CreateNew') {\r\n        functions.selectShipTo(bezl, bezl.vars.selectedCustomer.ShipTos.find(function (st) { return st.ID == bezl.vars.selectedCustomer.ID && st.ShipToNum == parm; }));\r\n    }\r\n    else {\r\n        bezl.vars.selectedShipTo = {};\r\n    }\r\n});\r\n"},{"method":"addPart","code":"require(['https://rawgit.com/bezlio/bezlio-apps/development/roles/customer-portal/order-entry/js/order.js'], function(functions) {\n\tfunctions.addLine(bezl)\n});","declares":["$","parm","bezl","dataResp","require"],"compiled":"require(['https://rawgit.com/bezlio/bezlio-apps/development/roles/customer-portal/order-entry/js/order.js'], function (functions) {\r\n    functions.addLine(bezl);\r\n});\r\n"},{"method":"delPart","code":"bezl.vars.partList.splice(parm, 1);","declares":["$","parm","bezl","dataResp","require"],"compiled":"bezl.vars.partList.splice(parm, 1);\r\n"},{"method":"submitOrder","code":"require(['https://rawgit.com/bezlio/bezlio-apps/development/roles/customer-portal/order-entry/js/order.js'], function(functions) {\n\tfunctions.submitOrder(bezl)\n});","declares":["$","parm","bezl","dataResp","require"],"compiled":"require(['https://rawgit.com/bezlio/bezlio-apps/development/roles/customer-portal/order-entry/js/order.js'], function (functions) {\r\n    functions.submitOrder(bezl);\r\n});\r\n"},{"method":"qtyChange","code":"bezl.vars.orderTotal = 0;\nbezl.vars.partList.forEach(p => {\n\tbezl.vars.orderTotal += p.Qty * p.UnitPrice;\n});","declares":["$","parm","bezl","dataResp","require"],"compiled":"bezl.vars.orderTotal = 0;\r\nbezl.vars.partList.forEach(function (p) {\r\n    bezl.vars.orderTotal += p.Qty * p.UnitPrice;\r\n});\r\n"}],"datatrans":null,"data":"","id":"1a18c44b-5262-495c-9708-22035327113d","type":"Bezl"}