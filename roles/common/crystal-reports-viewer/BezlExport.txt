{"name":"Crystal Reports Viewer","template":"custom","owner":"aellis@saberlogic.com","shares":[],"vars":[],"dataSubscriptions":[{"name":"ReportListing","connectionId":"11eab4b4-999d-467a-86cb-b48dd077f20c","dataSource":"brdb","plugin":"CrystalReports","method":"GetReportList","args":"{\"FolderName\":\"Default\"}","data":null,"refreshInverval":0,"lastRefresh":null}],"markup":"<div class=\"row\">\n  \n  <!-- Report Selection Sidebar -->\n  <div class=\"col-sm-3\" [hidden]=\"bezl.vars.reportSelected\">\n    <table class=\"table table-hover table-striped\">\n      <thead>\n        <tr>\n          <th style=\"padding: 0 !important; margin: 0 !important;\">\n            <!-- This is the normal button layout for a big screen.  The small layout will follow -->\n            <div class=\"btn-group btn-group-justified hidden-xs\" role=\"group\" aria-label=\"Justified button group\">\n              <div class=\"btn-group\" role=\"group\">\n                <button type=\"button\"\n                        (click)=\"bezl.functions['sort']('BaseName')\"\n                        class=\"btn btn-default\">\n                  <span class=\"pull-left\">Report Name</span>\n                  <i class=\"fa fa-sort-alpha-asc pull-right\" aria-hidden=\"true\" \n                     *ngIf=\"bezl.vars.sortCol == 'ID' && bezl.vars.sort == 'asc'\"></i>\n                  <i class=\"fa fa-sort-alpha-desc pull-right\" aria-hidden=\"true\" \n                     *ngIf=\"bezl.vars.sortCol == 'ID' && bezl.vars.sort == 'desc'\"></i>\n                </button>\n              </div>\n            </div>\n\n            <!-- This is the normal button layout for small screens -->\n            <div class=\"visible-xs\">\n              <div class=\"row\">\n                <div class=\"col-sm-12\">\n                  Sort By: <br />\n                  <div class=\"btn-group\">\n                    <button type=\"button\"\n                            (click)=\"bezl.functions['sort']('BaseName')\"\n                            class=\"btn btn-default btn-mobile\"\n                            >\n                      <span class=\"pull-left\">Report Name</span>\n                      <i class=\"fa fa-sort-alpha-asc pull-right\" aria-hidden=\"true\" \n                         *ngIf=\"bezl.vars.sortCol == 'ID' && bezl.vars.sort == 'asc'\"></i>\n                      <i class=\"fa fa-sort-alpha-desc pull-right\" aria-hidden=\"true\" \n                         *ngIf=\"bezl.vars.sortCol == 'ID' && bezl.vars.sort == 'desc'\"></i>\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <label style=\"margin-top:8px;margin-left:10px\" [hidden]=\"!bezl.vars.reportListingLoading\">Loading... \n                <i class=\"fa fa-spinner fa-spin\" style=\"font-size:24px\"></i>\n            </label>            \n            \n          </th>\n        </tr>\n      </thead>\n      \n      <tbody>\n       <tr class=\"read\" \n           *ngFor=\"let item of bezl.data.ReportListing\" \n           (click)=\"bezl.functions['runReport'](item)\"\n           [ngClass]=\"{'default': !item.Selected, 'success': item.Selected}\">\n         <td>{{item.BaseName}}</td>\n       </tr>\n      </tbody>\n    </table>\n  </div>\n  <!-- END: Report Selection Sidebar -->\n  \n  <!-- Selected Report Body -->\n  <div class=\"col-sm-9\">\n    \n    <nav class=\"navbar navbar-default\">\n      <div class=\"container-fluid\">\n        <div class=\"collapse navbar-collapse\">\n          <ul class=\"nav navbar-nav\">\n            <li><h4>  {{bezl.vars.selectedReport.BaseName}}</h4></li>\n          </ul>\n          <ul class=\"nav navbar-nav navbar-right\">\n            <li><button class=\"btn btn-default\" style=\"margin-top:8px\"\n                        *ngIf=\"!bezl.vars.reportLoading && bezl.vars.selectedReport\"\n                        (click)=\"bezl.functions['runReport'](bezl.vars.selectedReport)\">\n              <i class=\"fa fa-refresh\" aria-hidden=\"true\"></i> Refresh</button></li>\n            <li><button class=\"btn btn-default\" style=\"margin-top:8px\"\n                        *ngIf=\"!bezl.vars.reportLoading && bezl.vars.selectedReport \n              \t\t\t&& bezl.vars.selectedReport.ReportDetails.ParameterFields.length > 0\"\n                        (click)=\"bezl.functions['updateParameters'](bezl.vars.selectedReport)\">\n              <i class=\"fa fa-question\" aria-hidden=\"true\"></i> Update Parameters</button></li>\n            <li><button class=\"btn btn-default\" style=\"margin-top:8px\"\n                        *ngIf=\"bezl.vars.reportSelected\"\n                        (click)=\"bezl.functions['back']()\">\n              <i class=\"fa fa-arrow-left\" aria-hidden=\"true\"></i> Back</button></li>\n            <li><label class=\"pull-right\" style=\"margin-top:8px;margin-left:10px\"\n                       [hidden]=\"!bezl.vars.reportLoading || bezl.vars.promptForParameters\">Loading... \n              <i class=\"fa fa-spinner fa-spin\" style=\"font-size:24px\"></i>\n              </label>\n            </li>\n          </ul>\n        </div><!-- /.navbar-collapse -->\n      </div><!-- /.container-fluid -->\n    </nav>\n    \n    <h3 *ngIf=\"!bezl.vars.reportSelected\">No Report Selected</h3>\n        \n    <!-- Parameter Input -->\n    <div class=\"row\" \n         *ngFor=\"let param of bezl.vars.selectedReport.ReportDetails.ParameterFields\"\n         [hidden]=\"!bezl.vars.promptForParameters\">\n      <div *ngIf=\"param.ReportName == ''\">\n\n        <div class=\"panel panel-default\">\n          <div class=\"panel-heading\">\n            <h5 class=\"panel-title\">{{param.PromptText}}</h5>\n          </div>\n          <div class=\"panel-body\">\n            \n            <!-- Single Value  -->\n            <div *ngIf=\"!param.EnableAllowMultipleValue && \n                        param.DefaultValues.length == 0 &&\n                        param.DiscreteOrRangeKind == 0\">\n              <div class=\"row\">\n                <div class=\"col-sm-12\">\n                  <!-- String input -->\n                  <input class=\"form-control\" type=\"text\"\n                         [required]=\"!param.IsOptionalPrompt\" \n                         [(ngModel)]=\"param.Value\"\n                         *ngIf=\"param.ParameterValueType == 4\">\n                  \n                  <!-- Date input -->\n                  <input class=\"form-control\" type=\"date\"\n                         [required]=\"!param.IsOptionalPrompt\" \n                         [(ngModel)]=\"param.Value\"\n                         *ngIf=\"param.ParameterValueType == 3\"> \n                  \n                  <!-- Number input -->\n                  <input class=\"form-control\" type=\"number\"\n                         [required]=\"!param.IsOptionalPrompt\" \n                         [(ngModel)]=\"param.Value\"\n                         *ngIf=\"param.ParameterValueType == 0 || param.ParameterValueType == 1\">\n                  \n                  <!-- Boolean input -->\n                  <input class=\"form-control\" type=\"checkbox\"\n                         [required]=\"!param.IsOptionalPrompt\" \n                         [(ngModel)]=\"param.Value\"\n                         *ngIf=\"param.ParameterValueType == 2\">\n                  \n                  <!-- DateTime input -->\n                  <input class=\"form-control\" type=\"datetime-local\"\n                         [required]=\"!param.IsOptionalPrompt\" \n                         [(ngModel)]=\"param.Value\"\n                         *ngIf=\"param.ParameterValueType == 5\"> \n                  \n                  <!-- Time input -->\n                  <input class=\"form-control\" type=\"time\"\n                         [required]=\"!param.IsOptionalPrompt\" \n                         [(ngModel)]=\"param.Value\"\n                         *ngIf=\"param.ParameterValueType == 6\"> \n                </div>\n              </div>\n              <button (click)=\"param.Value = ''\" class=\"btn btn-md btn-default\" style=\"width:100%;margin-top:5px\">Clear</button>\n            </div>\n            <!-- END: Single Value -->\n            \n            <!-- String Parameter / Single Value / Default Values / Allow Custom -->\n            <div *ngIf=\"!param.EnableAllowMultipleValue && \n                        param.AllowCustomValues && \n                        param.DefaultValues.length > 0 &&\n                        param.DiscreteOrRangeKind == 0\">\n              <div class=\"row\">\n                <div class=\"col-sm-6\">\n                  <select class=\"form-control\" [(ngModel)]=\"param.Value\" [required]=\"!param.IsOptionalPrompt\">\n                    <option *ngFor=\"let item of param.DefaultValues\" [value]=\"item.Value\">{{item.Value}}</option>\n                  </select>\n                </div>\n                <div class=\"col-sm-6\">                  \n                  <!-- String input -->\n                  <input class=\"form-control\" type=\"text\" placeholder=\"Other Value\"\n                         [required]=\"!param.IsOptionalPrompt\" \n                         [(ngModel)]=\"param.Value\"\n                         *ngIf=\"param.ParameterValueType == 4\">\n                  \n                  <!-- Date input -->\n                  <input class=\"form-control\" type=\"date\" placeholder=\"Other Value\"\n                         [required]=\"!param.IsOptionalPrompt\" \n                         [(ngModel)]=\"param.Value\"\n                         *ngIf=\"param.ParameterValueType == 3\"> \n                  \n                  <!-- Number input -->\n                  <input class=\"form-control\" type=\"number\" placeholder=\"Other Value\"\n                         [required]=\"!param.IsOptionalPrompt\" \n                         [(ngModel)]=\"param.Value\"\n                         *ngIf=\"param.ParameterValueType == 0 || param.ParameterValueType == 1\">\n                  \n                  <!-- Boolean input -->\n                  <input class=\"form-control\" type=\"checkbox\" placeholder=\"Other Value\"\n                         [required]=\"!param.IsOptionalPrompt\" \n                         [(ngModel)]=\"param.Value\"\n                         *ngIf=\"param.ParameterValueType == 2\">\n                  \n                  <!-- DateTime input -->\n                  <input class=\"form-control\" type=\"datetime-local\" placeholder=\"Other Value\"\n                         [required]=\"!param.IsOptionalPrompt\" \n                         [(ngModel)]=\"param.Value\"\n                         *ngIf=\"param.ParameterValueType == 5\"> \n                  \n                  <!-- Time input -->\n                  <input class=\"form-control\" type=\"time\" placeholder=\"Other Value\"\n                         [required]=\"!param.IsOptionalPrompt\" \n                         [(ngModel)]=\"param.Value\"\n                         *ngIf=\"param.ParameterValueType == 6\"> \n                </div>\n              </div>\n              <button (click)=\"param.Value = '';param.AddValue = ''\" class=\"btn btn-md btn-default\" style=\"width:100%;margin-top:5px\">Clear</button>\n            </div>\n            <!-- END: String Parameter / Single Value / Default Values / Allow Custom -->\n\n            <!-- String Parameter / Multi Value -->\n            <div *ngIf=\"param.ParameterValueType == 4 && \n                        param.EnableAllowMultipleValue &&\n                        param.DiscreteOrRangeKind == 0\">\n              <div class=\"row\">\n                <div class=\"col-sm-5\">\n                  <select class=\"form-control\" [(ngModel)]=\"param.AddValue\" \n                          (change)=\"bezl.functions['addParameterValue'](param)\"\n                          [required]=\"!param.IsOptionalPrompt\" >\n                    <option *ngFor=\"let item of param.DefaultValues\" [value]=\"item.Value\">{{item.Value}}</option>\n                  </select>   \n                </div>\n                <div class=\"col-sm-5\">               \n                  <!-- String input -->\n                  <input class=\"form-control\" type=\"text\" placeholder=\"Other Value\"\n                         [required]=\"!param.IsOptionalPrompt && param.Value.length == 0\" \n                         [(ngModel)]=\"param.AddValue\"\n                         *ngIf=\"param.ParameterValueType == 4\"\n                         (keyup.enter)=\"bezl.functions['addParameterValue'](param)\">\n                  \n                  <!-- Date input -->\n                  <input class=\"form-control\" type=\"date\" placeholder=\"Other Value\"\n                         [required]=\"!param.IsOptionalPrompt && param.Value.length == 0\" \n                         [(ngModel)]=\"param.AddValue\"\n                         *ngIf=\"param.ParameterValueType == 3\"> \n                  \n                  <!-- Number input -->\n                  <input class=\"form-control\" type=\"number\" placeholder=\"Other Value\"\n                         [required]=\"!param.IsOptionalPrompt && param.Value.length == 0\" \n                         [(ngModel)]=\"param.AddValue\"\n                         *ngIf=\"param.ParameterValueType == 0 || param.ParameterValueType == 1\"\n                         (keyup.enter)=\"bezl.functions['addParameterValue'](param)\">\n                  \n                  <!-- Boolean input -->\n                  <input class=\"form-control\" type=\"checkbox\" placeholder=\"Other Value\"\n                         [required]=\"!param.IsOptionalPrompt && param.Value.length == 0\" \n                         [(ngModel)]=\"param.AddValue\"\n                         *ngIf=\"param.ParameterValueType == 2\">\n                  \n                  <!-- DateTime input -->\n                  <input class=\"form-control\" type=\"datetime-local\" placeholder=\"Other Value\"\n                         [required]=\"!param.IsOptionalPrompt && param.Value.length == 0\" \n                         [(ngModel)]=\"param.AddValue\"\n                         *ngIf=\"param.ParameterValueType == 5\"> \n                  \n                  <!-- Time input -->\n                  <input class=\"form-control\" type=\"time\" placeholder=\"Other Value\"\n                         [required]=\"!param.IsOptionalPrompt && param.Value.length == 0\" \n                         [(ngModel)]=\"param.AddValue\"\n                         *ngIf=\"param.ParameterValueType == 6\"> \n                  \n                </div>\n                <div class=\"col-sm-2\">\n                  <button (click)=\"bezl.functions['addParameterValue'](param)\" class=\"btn btn-md btn-default\" style=\"width:100%;height:28px\">\n                    <i class=\"fa fa-plus-square-o\" aria-hidden=\"true\"></i>\n                  </button>\n                </div>\n              </div>\n              <div class=\"row\" *ngFor=\"let v of param.Value; let i = index;\">\n                <div class=\"col-sm-10\">\n                  <input class=\"form-control\" type=\"text\" [(ngModel)]=\"param.Value[i]\" readonly>\n                </div>\n                <div class=\"col-sm-2\">\n                  <button (click)=\"param.Value.splice(i,1)\" class=\"btn btn-md btn-default\" style=\"width:100%;height:28px\">\n                    <i class=\"fa fa-minus-square-o\" aria-hidden=\"true\"></i>\n                  </button>\n                </div>\n              </div>\n\n              <button (click)=\"param.Value.splice(0)\" class=\"btn btn-md btn-default\" style=\"width:100%;margin-top:5px\">Remove All</button>\n            </div>\n            <!-- END: String Parameter / Multi Value -->\n            \n            <!-- String Parameter / Range / Single Value  -->\n            <div *ngIf=\"!param.EnableAllowMultipleValue && \n                        param.DefaultValues.length == 0 &&\n                        param.DiscreteOrRangeKind == 1\">\n              <div class=\"row\">\n                <div class=\"col-sm-6\">                 \n                  <!-- String input -->\n                  <input class=\"form-control\" type=\"text\" placeholder=\"From\"\n                         [required]=\"!param.IsOptionalPrompt\" \n                         [(ngModel)]=\"param.Value.StartValue\"\n                         *ngIf=\"param.ParameterValueType == 4\">\n                  \n                  <!-- Date input -->\n                  <input class=\"form-control\" type=\"date\" placeholder=\"From\"\n                         [required]=\"!param.IsOptionalPrompt\" \n                         [(ngModel)]=\"param.Value.StartValue\"\n                         *ngIf=\"param.ParameterValueType == 3\"> \n                  \n                  <!-- Number input -->\n                  <input class=\"form-control\" type=\"number\" placeholder=\"From\"\n                         [required]=\"!param.IsOptionalPrompt\" \n                         [(ngModel)]=\"param.Value.StartValue\"\n                         *ngIf=\"param.ParameterValueType == 0 || param.ParameterValueType == 1\">\n                  \n                  <!-- Boolean input -->\n                  <input class=\"form-control\" type=\"checkbox\" placeholder=\"From\"\n                         [required]=\"!param.IsOptionalPrompt\" \n                         [(ngModel)]=\"param.Value.StartValue\"\n                         *ngIf=\"param.ParameterValueType == 2\">\n                  \n                  <!-- DateTime input -->\n                  <input class=\"form-control\" type=\"datetime-local\" placeholder=\"From\"\n                         [required]=\"!param.IsOptionalPrompt\" \n                         [(ngModel)]=\"param.Value.StartValue\"\n                         *ngIf=\"param.ParameterValueType == 5\"> \n                  \n                  <!-- Time input -->\n                  <input class=\"form-control\" type=\"time\" placeholder=\"From\"\n                         [required]=\"!param.IsOptionalPrompt\" \n                         [(ngModel)]=\"param.Value.StartValue\"\n                         *ngIf=\"param.ParameterValueType == 6\"> \n                  \n                </div>\n                <div class=\"col-sm-6\">                 \n                  <!-- String input -->\n                  <input class=\"form-control\" type=\"text\" placeholder=\"To\"\n                         [required]=\"!param.IsOptionalPrompt\" \n                         [(ngModel)]=\"param.Value.EndValue\"\n                         *ngIf=\"param.ParameterValueType == 4\">\n                  \n                  <!-- Date input -->\n                  <input class=\"form-control\" type=\"date\" placeholder=\"To\"\n                         [required]=\"!param.IsOptionalPrompt\" \n                         [(ngModel)]=\"param.Value.EndValue\"\n                         *ngIf=\"param.ParameterValueType == 3\"> \n                  \n                  <!-- Number input -->\n                  <input class=\"form-control\" type=\"number\" placeholder=\"To\"\n                         [required]=\"!param.IsOptionalPrompt\" \n                         [(ngModel)]=\"param.Value.EndValue\"\n                         *ngIf=\"param.ParameterValueType == 0 || param.ParameterValueType == 1\">\n                  \n                  <!-- Boolean input -->\n                  <input class=\"form-control\" type=\"checkbox\" placeholder=\"To\"\n                         [required]=\"!param.IsOptionalPrompt\" \n                         [(ngModel)]=\"param.Value.EndValue\"\n                         *ngIf=\"param.ParameterValueType == 2\">\n                  \n                  <!-- DateTime input -->\n                  <input class=\"form-control\" type=\"datetime-local\" placeholder=\"To\"\n                         [required]=\"!param.IsOptionalPrompt\" \n                         [(ngModel)]=\"param.Value.EndValue\"\n                         *ngIf=\"param.ParameterValueType == 5\"> \n                  \n                  <!-- Time input -->\n                  <input class=\"form-control\" type=\"time\" placeholder=\"To\"\n                         [required]=\"!param.IsOptionalPrompt\" \n                         [(ngModel)]=\"param.Value.EndValue\"\n                         *ngIf=\"param.ParameterValueType == 6\"> \n                </div>\n              </div>\n              <button (click)=\"param.Value = '';param.Value.StartValue = '';param.Value.EndValue = ''\" class=\"btn btn-md btn-default\" style=\"width:100%;margin-top:5px\">Clear</button>\n            </div>\n            <!-- END: String Parameter / Single Value / Dynamic -->\n            \n          </div>\n        </div>\n      </div>\n    </div>\n    \n    <div [hidden]=\"!bezl.vars.promptForParameters\">\n      <div class=\"btn-group btn-group-justified\" role=\"group\" aria-label=\"Justified button group\">\n        <div class=\"btn-group\" role=\"group\">\n          <button (click)=\"bezl.functions['runReport'](bezl.vars.selectedReport)\" \n                  class=\"btn btn-md btn-default\">Ok</button>\n        </div>\n        <div class=\"btn-group\" role=\"group\">\n          <button (click)=\"bezl.vars.reportSelected=false\" class=\"btn btn-md btn-default\">Cancel</button>\n        </div>      \n      </div>\n    </div>\n    <!-- END: Parameter Input -->\n    \n    <!-- Report Output -->\n    <div id=\"reports-container\" class=\"ng-scope pdfobject-container\" [hidden]=\"!bezl.vars.reportSelected || bezl.vars.promptForParameters\">\n        <iframe id=\"viewer\" src=\"\" type=\"application/pdf\" height=800 style=\"overflow: auto; width: 100%;\">\n        </iframe>\n    </div>\n    <!-- END: Report Output -->\n    \n  </div>\n  <!-- END: Selected Report Body -->\n  \n</div>\n\n\n\n","functions":[{"method":"ngOnInit","code":"bezl.vars.selectedReport = { \"ReportDetails\" : { \"ParameterFields\" : [] } };\n\nrequire(['https://bezlio-apps.bezl.io/roles/common/crystal-reports-viewer/js/onStartup.js'], function(functions) {\n\tfunctions.onStartup(bezl)\n});","declares":["$","parm","bezl","dataResp","require","flatpickr"],"compiled":"bezl.vars.selectedReport = { \"ReportDetails\": { \"ParameterFields\": [] } };\r\nrequire(['https://bezlio-apps.bezl.io/roles/common/crystal-reports-viewer/js/onStartup.js'], function (functions) {\r\n    functions.onStartup(bezl);\r\n});\r\n"},{"method":"onDataChange","code":"bezl.data = dataResp;\n\nrequire(['https://bezlio-apps.bezl.io/roles/common/crystal-reports-viewer/js/onDataChange.js'], function(functions) {\n\tfunctions.onDataChange(bezl)\n});","declares":["$","parm","bezl","dataResp","require"],"compiled":"bezl.data = dataResp;\r\nrequire(['https://bezlio-apps.bezl.io/roles/common/crystal-reports-viewer/js/onDataChange.js'], function (functions) {\r\n    functions.onDataChange(bezl);\r\n});\r\n"},{"method":"runReport","code":"require(['https://bezlio-apps.bezl.io/roles/common/crystal-reports-viewer/js/report.js'], function(functions) {\n\tfunctions.runReport(bezl, parm)\n});\n\n","declares":["$","parm","bezl","dataResp","require"],"compiled":"require(['https://bezlio-apps.bezl.io/roles/common/crystal-reports-viewer/js/report.js'], function (functions) {\r\n    functions.runReport(bezl, parm);\r\n});\r\n"},{"method":"addParameterValue","code":"require(['https://bezlio-apps.bezl.io/roles/common/crystal-reports-viewer/js/report.js'], function(functions) {\n\tfunctions.addParameterValue(bezl, parm)\n});\n\n","declares":["$","parm","bezl","dataResp","require"],"compiled":"require(['https://bezlio-apps.bezl.io/roles/common/crystal-reports-viewer/js/report.js'], function (functions) {\r\n    functions.addParameterValue(bezl, parm);\r\n});\r\n"},{"method":"back","code":"require(['https://bezlio-apps.bezl.io/roles/common/crystal-reports-viewer/js/report.js'], function(functions) {\n\tfunctions.back(bezl)\n});\n\n","declares":["$","parm","bezl","dataResp","require"],"compiled":"require(['https://bezlio-apps.bezl.io/roles/common/crystal-reports-viewer/js/report.js'], function (functions) {\r\n    functions.back(bezl);\r\n});\r\n"},{"method":"updateParameters","code":"bezl.vars['promptForParameters'] = true;","declares":["$","parm","bezl","dataResp","require"],"compiled":"bezl.vars['promptForParameters'] = true;\r\n"}],"datatrans":null,"data":"","id":"a81696e0-3d13-4043-b1bc-fffca758150c","type":"Bezl"}