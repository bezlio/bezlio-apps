{
  "id": "5b4cd3aa-ffc8-4690-ab5b-824f338f3f69",
  "name": "Geolocator",
  "template": "custom",
  "owner": "sremington@saberlogic.com",
  "shares": [],
  "vars": [],
  "dataSubscriptions": [],
  "markup": [
    "<style>",
    "#geoBar {",
    "    width: 00%;",
    "    height: 30px;",
    "    background-color: #4CAF50;",
    "    text-align: center; /* To center it horizontally (if you want) */",
    "    line-height: 30px; /* To center it vertically */",
    "    color: white; ",
    "}",
    "  ",
    "  .progress .progress-bar {",
    "  -webkit-transition: none;",
    "       -o-transition: none;",
    "          transition: none;",
    "}",
    "</style>",
    "",
    "<div *ngIf=\"!bezl.vars.loading.customerList\">",
    "\t<button (click)=\"bezl.functions['getCustomers']()\" class=\"btn btn-md btn-primary\">Geocode Customers</button>",
    "</div>",
    "<div *ngIf=\"bezl.vars.loading.customerList\">",
    "\t<label *ngIf=\"bezl.vars.geoTracker < 100\">Geocoding... <i class=\"fa fa-spinner fa-spin\" style=\"font-size:24px\"></i></label>",
    "  <label *ngIf=\"bezl.vars.geoTracker == 100\">Finishing up... <i class=\"fa fa-spinner fa-spin\" style=\"font-size:24px\"></i></label>",
    "</div>",
    "",
    "<div class=\"progress\" id=\"progress\" [hidden]=\"bezl.vars.geoTracker == 100\">",
    "  <div class=\"progress-bar progress-bar-striped active\" role=\"progressbar\" id='geoProgress'",
    "  aria-valuenow=\"bezl.vars.geoTracker\" aria-valuemin=\"0\" aria-valuemax=\"100\" ",
    "       [style.width]=\"bezl.vars.geoTracker + '%'\">",
    "  </div>",
    "</div>",
    "",
    "<!--<div class=\"progress\" id=\"progress\" [hidden]=\"bezl.vars.geoTracker < 100\">",
    "  <div class=\"progress-bar progress-bar-striped \" role=\"progressbar\" aria-valuemin=\"100\" aria-valuemax=\"100\">",
    "  </div>",
    "</div>-->",
    "",
    "<div class=\"col-sm-12\">",
    "  <div class=\"col-sm-6\">",
    "<h4>Customer Listing</h4>",
    "<div [hidden]=\"bezl.vars.loading.customerList\">",
    "  <table style=\"width:100%\" class=\"table-striped\">",
    "  <thead>",
    "     <tr>",
    "      <th>Company</th>",
    "      <th>Address</th>",
    "      <th>Geolocation</th>",
    " \t </tr>",
    "    </thead>",
    "  <tbody>",
    "   <tr class=\"read\" *ngFor=\"let row of bezl.vars.customers\">",
    "    <td> {{row.display}} </td>",
    "     <td> {{row.data.Address}} </td>",
    "     <td> {{row.data.Geocode_Location}} </td>",
    "    </tr>",
    "    </tbody>",
    "</table>",
    "</div>",
    "</div>",
    "",
    "<div class=\"col-sm-6\">",
    "  <div id=\"map\" style=\"height: 450px; border-style: solid;\"></div>",
    "</div>",
    "</div>"
  ],
  "functions": [
    {
      "method": "ngOnInit",
      "code": "bezl.vars.currentAddress = \"\";\n        bezl.vars.markers = [];\n        bezl.vars.customers = [];\n        bezl.vars.selectedCustomer = { \"CustNum\": 0 };\n        bezl.vars.loading = { \n            customerList: false\n        }\nbezl.vars.redo = [];\n\nvar progress = document.getElementById('geoProgress');\nvar pNum = progress.style.width;\n\nbezl.functions['setConfig']();\nrequire([bezl.vars.config.baseJsUrl + 'onStartup.js'], function(functions) {\n\tfunctions.onStartup(bezl);\n});",
      "declares": [
        "$",
        "parm",
        "bezl",
        "dataResp",
        "require",
        "FusionCharts"
      ],
      "compiled": "bezl.vars.currentAddress = \"\";\r\nbezl.vars.markers = [];\r\nbezl.vars.customers = [];\r\nbezl.vars.selectedCustomer = { \"CustNum\": 0 };\r\nbezl.vars.loading = {\r\n    customerList: false\r\n};\r\nbezl.vars.redo = [];\r\nvar progress = document.getElementById('geoProgress');\r\nvar pNum = progress.style.width;\r\nbezl.functions['setConfig']();\r\nrequire([bezl.vars.config.baseJsUrl + 'onStartup.js'], function (functions) {\r\n    functions.onStartup(bezl);\r\n});\r\n"
    },
    {
      "method": "onDataChange",
      "code": "bezl.data = dataResp;\n\nbezl.functions['setConfig']();\nrequire([bezl.vars.config.baseJsUrl + 'onDataChange.js'], function(functions) {\n\tfunctions.onDataChange(bezl);\n});",
      "declares": [
        "$",
        "parm",
        "bezl",
        "dataResp",
        "require",
        "FusionCharts"
      ],
      "compiled": "bezl.data = dataResp;\r\nbezl.functions['setConfig']();\r\nrequire([bezl.vars.config.baseJsUrl + 'onDataChange.js'], function (functions) {\r\n    functions.onDataChange(bezl);\r\n});\r\n"
    },
    {
      "method": "getCustomers",
      "code": "bezl.vars.loading.customerList = true;\n\nrequire([bezl.vars.config.baseJsUrl + 'customer.js'], function(customer) {\n\tcustomer.runQuery(bezl, 'CustList');\n});\n\nbezl.vars.loading.customerList = false;",
      "declares": [
        "$",
        "parm",
        "bezl",
        "dataResp",
        "require",
        "FusionCharts"
      ],
      "compiled": "bezl.vars.loading.customerList = true;\r\nrequire([bezl.vars.config.baseJsUrl + 'customer.js'], function (customer) {\r\n    customer.runQuery(bezl, 'CustList');\r\n});\r\nbezl.vars.loading.customerList = false;\r\n"
    },
    {
      "method": "setConfig",
      "code": "bezl.vars.config = {};\nbezl.vars.config.GoogleAPIKey = \"AIzaSyAPveNcZ80xykDGeRhdKKHvvU9XINc9tqg\";\n\n// *********************************************************************************\n// Configuration Variables\n// Only edit these if you know what you are doing.\n// version: The version number of this app. Setting this vill use the javascript\n//          include files in the corresponding \"versions\" subfolder. An empty string\n//          will use the \"development\" javascript files in the root directory.\n// libVersion: The version number of the library javascript include files to use.\n// baseUrl: The base URL of the javascript include files. Generally this should be an\n//          empty string and the correct path will be automatically determined.\n//          However, for development you may wish to point this to a RawGit URL of\n//          a specific branch (e.g. https://rawgit.com/bezlio/bezlio-apps/my-branch).\nbezl.vars.config.version = \"1.0\";\nbezl.vars.config.libVersion = \"1.0\";\nbezl.vars.config.baseUrl = \"\";\n// *********************************************************************************\n\n// If the baseURL is not set above then we will determine a sane default based on the URL\nif (bezl.vars.config.baseUrl == \"\") {\n    if (window.location.href.indexOf(\"portal-dev.bezl.io\") !== -1) {\n        bezl.vars.config.baseUrl = \"https://apps-dev.bezl.io\";\n    } else {\n        bezl.vars.config.baseUrl = \"https://apps.bezl.io\";\n    }\n}\n\n// If version numbers exist above they will also be added to the javascript include URLs\nbezl.vars.config.baseJsUrl = bezl.vars.config.baseUrl\n  \t\t\t\t\t\t\t+ \"/roles/common/geolocation/\"\n  \t\t\t\t\t\t\t+ (bezl.vars.config.version ? \"versions/\" + bezl.vars.config.version + \"/\" : \"\")\n  \t\t\t\t\t\t\t+ \"js/\"\nbezl.vars.config.baseLibraryUrl = bezl.vars.config.baseUrl\n  \t\t\t\t\t\t\t+ \"/libraries/\"\n\t\t\t\t\t\t\t+ (bezl.vars.config.libVersion ? \"versions/\" + bezl.vars.config.libVersion + \"/\" : \"\")",
      "declares": [
        "$",
        "parm",
        "bezl",
        "dataResp",
        "require",
        "FusionCharts"
      ],
      "compiled": "bezl.vars.config = {};\r\nbezl.vars.config.GoogleAPIKey = \"AIzaSyAPveNcZ80xykDGeRhdKKHvvU9XINc9tqg\";\r\n// *********************************************************************************\r\n// Configuration Variables\r\n// Only edit these if you know what you are doing.\r\n// version: The version number of this app. Setting this vill use the javascript\r\n//          include files in the corresponding \"versions\" subfolder. An empty string\r\n//          will use the \"development\" javascript files in the root directory.\r\n// libVersion: The version number of the library javascript include files to use.\r\n// baseUrl: The base URL of the javascript include files. Generally this should be an\r\n//          empty string and the correct path will be automatically determined.\r\n//          However, for development you may wish to point this to a RawGit URL of\r\n//          a specific branch (e.g. https://rawgit.com/bezlio/bezlio-apps/my-branch).\r\nbezl.vars.config.version = \"1.0\";\r\nbezl.vars.config.libVersion = \"1.0\";\r\nbezl.vars.config.baseUrl = \"\";\r\n// *********************************************************************************\r\n// If the baseURL is not set above then we will determine a sane default based on the URL\r\nif (bezl.vars.config.baseUrl == \"\") {\r\n    if (window.location.href.indexOf(\"portal-dev.bezl.io\") !== -1) {\r\n        bezl.vars.config.baseUrl = \"https://apps-dev.bezl.io\";\r\n    }\r\n    else {\r\n        bezl.vars.config.baseUrl = \"https://apps.bezl.io\";\r\n    }\r\n}\r\n// If version numbers exist above they will also be added to the javascript include URLs\r\nbezl.vars.config.baseJsUrl = bezl.vars.config.baseUrl + \"/roles/common/geolocation/\" + (bezl.vars.config.version ? \"versions/\" + bezl.vars.config.version + \"/\" : \"\") + \"js/\";\r\nbezl.vars.config.baseLibraryUrl = bezl.vars.config.baseUrl + \"/libraries/\" + (bezl.vars.config.libVersion ? \"versions/\" + bezl.vars.config.libVersion + \"/\" : \"\");\r\n"
    }
  ],
  "data": ""
}