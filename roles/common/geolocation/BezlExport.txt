{
  "id": "3aa9d9c8-febb-4ca9-bcf5-5904ce149d79",
  "name": "Geolocator",
  "template": "custom",
  "owner": "nowens@saberlogic.com",
  "shares": [],
  "vars": [],
  "dataSubscriptions": [],
  "markup": [
    "<style>",
    "#geoBar {",
    "    width: 00%;",
    "    height: 30px;",
    "    background-color: #4CAF50;",
    "    text-align: center; /* To center it horizontally (if you want) */",
    "    line-height: 30px; /* To center it vertically */",
    "    color: white; ",
    "}",
    "  ",
    "  .progress .progress-bar {",
    "  -webkit-transition: none;",
    "       -o-transition: none;",
    "          transition: none;",
    "}",
    "</style>",
    "",
    "<div *ngIf=\"!bezl.vars.loading.customerList\">",
    "\t<button (click)=\"bezl.functions['getCustomers']()\" class=\"btn btn-md btn-primary\">Geocode Customers</button>",
    "</div>",
    "<div *ngIf=\"bezl.vars.loading.customerList\">",
    "\t<label *ngIf=\"bezl.vars.geoTracker < 100\">Geocoding... <i class=\"fa fa-spinner fa-spin\" style=\"font-size:24px\"></i></label>",
    "  <label *ngIf=\"bezl.vars.geoTracker == 100\">Finishing up... <i class=\"fa fa-spinner fa-spin\" style=\"font-size:24px\"></i></label>",
    "</div>",
    "",
    "<div class=\"progress\" id=\"progress\" [hidden]=\"bezl.vars.geoTracker == 100\">",
    "  <div class=\"progress-bar progress-bar-striped active\" role=\"progressbar\" id='geoProgress'",
    "  aria-valuenow=\"bezl.vars.geoTracker\" aria-valuemin=\"0\" aria-valuemax=\"100\" ",
    "       [style.width]=\"bezl.vars.geoTracker + '%'\">",
    "  </div>",
    "</div>",
    "",
    "<!--<div class=\"progress\" id=\"progress\" [hidden]=\"bezl.vars.geoTracker < 100\">",
    "  <div class=\"progress-bar progress-bar-striped \" role=\"progressbar\" aria-valuemin=\"100\" aria-valuemax=\"100\">",
    "  </div>",
    "</div>-->",
    "",
    "<div class=\"col-sm-12\">",
    "  <div class=\"col-sm-6\">",
    "<h4>Customer Listing</h4>",
    "<div [hidden]=\"bezl.vars.loading.customerList\">",
    "  <table style=\"width:100%\" class=\"table-striped\">",
    "  <thead>",
    "     <tr>",
    "      <th>Company</th>",
    "      <th>Address</th>",
    "      <th>Geolocation</th>",
    " \t </tr>",
    "    </thead>",
    "  <tbody>",
    "   <tr class=\"read\" *ngFor=\"let row of bezl.vars.customers\">",
    "    <td> {{row.display}} </td>",
    "     <td> {{row.data.Address}} </td>",
    "     <td> {{row.data.Geocode_Location}} </td>",
    "    </tr>",
    "    </tbody>",
    "</table>",
    "</div>",
    "</div>",
    "",
    "<div class=\"col-sm-6\">",
    "  <div id=\"map\" style=\"height: 450px; border-style: solid;\"></div>",
    "</div>",
    "</div>"
  ],
  "functions": [
    {
      "method": "ngOnInit",
      "code": "bezl.vars.currentAddress = \"\";\n        bezl.vars.markers = [];\n        bezl.vars.customers = [];\n        bezl.vars.selectedCustomer = { \"CustNum\": 0 };\n        bezl.vars.loading = { \n            customerList: false\n        }\nbezl.vars.config = {};\nbezl.vars.config.GoogleAPIKey = \"AIzaSyAPveNcZ80xykDGeRhdKKHvvU9XINc9tqg\";\nbezl.vars.redo = [];\n\nbezl.vars.config.baseUrl = \"\";\n// If the baseURL is not set in the line above then we will determine a sane default based on the URL\nif (bezl.vars.config.baseUrl == \"\") {\n    if (window.location.href.indexOf(\"portal-dev.bezl.io\") !== -1) {\n        bezl.vars.config.baseUrl = \"https://bezlio-apps-dev.bezl.io\";\n    } else {\n        bezl.vars.config.baseUrl = \"https://bezlio-apps.bezl.io\";\n    }\n}\nbezl.vars.config.baseJsUrl = bezl.vars.config.baseUrl + \"/roles/common/geolocation/js/\"\nbezl.vars.config.baseLibraryUrl = bezl.vars.config.baseUrl + \"/libraries/\"\n\nvar progress = document.getElementById('geoProgress');\nvar pNum = progress.style.width;\n\nrequire([bezl.vars.config.baseJsUrl + 'onStartup.js'], function(functions) {\n\tfunctions.onStartup(bezl);\n});",
      "declares": [
        "$",
        "parm",
        "bezl",
        "dataResp",
        "require"
      ],
      "compiled": "bezl.vars.currentAddress = \"\";\r\nbezl.vars.markers = [];\r\nbezl.vars.customers = [];\r\nbezl.vars.selectedCustomer = { \"CustNum\": 0 };\r\nbezl.vars.loading = {\r\n    customerList: false\r\n};\r\nbezl.vars.config = {};\r\nbezl.vars.config.GoogleAPIKey = \"AIzaSyAPveNcZ80xykDGeRhdKKHvvU9XINc9tqg\";\r\nbezl.vars.redo = [];\r\nbezl.vars.config.baseUrl = \"\";\r\n// If the baseURL is not set in the line above then we will determine a sane default based on the URL\r\nif (bezl.vars.config.baseUrl == \"\") {\r\n    if (window.location.href.indexOf(\"portal-dev.bezl.io\") !== -1) {\r\n        bezl.vars.config.baseUrl = \"https://bezlio-apps-dev.bezl.io\";\r\n    }\r\n    else {\r\n        bezl.vars.config.baseUrl = \"https://bezlio-apps.bezl.io\";\r\n    }\r\n}\r\nbezl.vars.config.baseJsUrl = bezl.vars.config.baseUrl + \"/roles/common/geolocation/js/\";\r\nbezl.vars.config.baseLibraryUrl = bezl.vars.config.baseUrl + \"/libraries/\";\r\nvar progress = document.getElementById('geoProgress');\r\nvar pNum = progress.style.width;\r\nrequire([bezl.vars.config.baseJsUrl + 'onStartup.js'], function (functions) {\r\n    functions.onStartup(bezl);\r\n});\r\n"
    },
    {
      "method": "onDataChange",
      "code": "bezl.data = dataResp;\n\nrequire([bezl.vars.config.baseJsUrl + 'onDataChange.js'], function(functions) {\n\tfunctions.onDataChange(bezl);\n});",
      "declares": [
        "$",
        "parm",
        "bezl",
        "dataResp",
        "require"
      ],
      "compiled": "bezl.data = dataResp;\r\nrequire([bezl.vars.config.baseJsUrl + 'onDataChange.js'], function (functions) {\r\n    functions.onDataChange(bezl);\r\n});\r\n"
    },
    {
      "method": "getCustomers",
      "code": "bezl.vars.loading.customerList = true;\n\nrequire([bezl.vars.config.baseJsUrl + 'customer.js'], function(customer) {\n\tcustomer.runQuery(bezl, 'CustList');\n});\n\nbezl.vars.loading.customerList = false;",
      "declares": [
        "$",
        "parm",
        "bezl",
        "dataResp",
        "require"
      ],
      "compiled": "bezl.vars.loading.customerList = true;\r\nrequire([bezl.vars.config.baseJsUrl + 'customer.js'], function (customer) {\r\n    customer.runQuery(bezl, 'CustList');\r\n});\r\nbezl.vars.loading.customerList = false;\r\n"
    }
  ],
  "data": ""
}